"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("immutable"),n=e(require("fbjs/lib/invariant")),r=e(require("fbjs/lib/UnicodeBidiService")),o=e(require("fbjs/lib/nullthrows")),i=e(require("react")),a=e(require("fbjs/lib/cx")),c=e(require("fbjs/lib/UserAgent")),l=e(require("fbjs/lib/Keys")),s=e(require("react-dom")),u=e(require("fbjs/lib/UnicodeBidi")),f=e(require("fbjs/lib/UnicodeBidiDirection")),g=e(require("fbjs/lib/containsNode")),p=e(require("fbjs/lib/getActiveElement")),d=e(require("fbjs/lib/Scroll")),h=e(require("fbjs/lib/Style")),y=e(require("fbjs/lib/getElementPosition")),v=e(require("fbjs/lib/getScrollPosition")),m=e(require("fbjs/lib/getViewportDimensions")),S=e(require("fbjs/lib/joinClasses")),b=e(require("fbjs/lib/DataTransfer")),C=e(require("fbjs/lib/setImmediate")),k=e(require("fbjs/lib/UnicodeUtils")),E=e(require("fbjs/lib/warning")),K=e(require("fbjs/lib/TokenizeUtil")),_=e(require("fbjs/lib/URI")),x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function D(e,t){function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r}var B={createFromArray:function(e){return t.OrderedMap(e.map((function(e){return[e.getKey(),e]})))}},M=t.OrderedSet(),O={style:M,entity:null},A=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return D(n,e),n.prototype.getStyle=function(){return this.get("style")},n.prototype.getEntity=function(){return this.get("entity")},n.prototype.hasStyle=function(e){return this.getStyle().includes(e)},n.applyStyle=function(e,t){var r=e.set("style",e.getStyle().add(t));return n.create(r)},n.removeStyle=function(e,t){var r=e.set("style",e.getStyle().remove(t));return n.create(r)},n.applyEntity=function(e,t){var r=e.getEntity()===t?e:e.set("entity",t);return n.create(r)},n.create=function(e){if(!e)return L;var r={style:M,entity:null},o=t.Map(r).merge(e),i=F.get(o);if(i)return i;var a=new n(o);return F=F.set(o,a),a},n}(t.Record(O)),L=new A,F=t.Map([[t.Map(O),L]]);function N(e,t,n,r){if(e.size){var o=0;e.reduce((function(e,i,a){return t(e,i)||(n(e)&&r(o,a),o=a),i})),n(e.last())&&r(o,e.count())}}A.EMPTY=L;var I=t.OrderedSet(),R={key:"",type:"unstyled",text:"",characterList:t.List(),depth:0,data:t.Map()},P=t.Record(R),U=function(e){function n(n){return e.call(this,function(e){if(!e)return e;var n=e.characterList,r=e.text;return r&&!n&&(e.characterList=t.List(t.Repeat(A.EMPTY,r.length))),e}(n))||this}return D(n,e),n.prototype.getKey=function(){return this.get("key")},n.prototype.getType=function(){return this.get("type")},n.prototype.getText=function(){return this.get("text")},n.prototype.getCharacterList=function(){return this.get("characterList")},n.prototype.getLength=function(){return this.getText().length},n.prototype.getDepth=function(){return this.get("depth")},n.prototype.getData=function(){return this.get("data")},n.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():I},n.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},n.prototype.findStyleRanges=function(e,t){N(this.getCharacterList(),H,e,t)},n.prototype.findEntityRanges=function(e,t){N(this.getCharacterList(),j,e,t)},n}(P);function H(e,t){return e.getStyle()===t.getStyle()}function j(e,t){return e.getEntity()===t.getEntity()}var q=t.OrderedSet(),W={parent:null,characterList:t.List(),data:t.Map(),depth:0,key:"",text:"",type:"unstyled",children:t.List(),prevSibling:null,nextSibling:null},z=function(e,t){return e.getStyle()===t.getStyle()},V=function(e,t){return e.getEntity()===t.getEntity()},G=function(e){function n(n){return void 0===n&&(n=W),e.call(this,function(e){if(!e)return e;var n=e.characterList,r=e.text;return r&&!n&&(e.characterList=t.List(t.Repeat(A.EMPTY,r.length))),e}(n))||this}return D(n,e),n.prototype.getKey=function(){return this.get("key")},n.prototype.getType=function(){return this.get("type")},n.prototype.getText=function(){return this.get("text")},n.prototype.getCharacterList=function(){return this.get("characterList")},n.prototype.getLength=function(){return this.getText().length},n.prototype.getDepth=function(){return this.get("depth")},n.prototype.getData=function(){return this.get("data")},n.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():q},n.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},n.prototype.getChildKeys=function(){return this.get("children")},n.prototype.getParentKey=function(){return this.get("parent")},n.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")},n.prototype.getNextSiblingKey=function(){return this.get("nextSibling")},n.prototype.findStyleRanges=function(e,t){N(this.getCharacterList(),z,e,t)},n.prototype.findEntityRanges=function(e,t){N(this.getCharacterList(),V,e,t)},n}(t.Record(W)),J=function(e,t,n){return Y(e,t,n,!0)},X=function(e,t,n){return Y(e,t,n,!1)};function Y(e,n,r,o){var i=e.getBlockMap(),a=n.getStartKey(),c=n.getStartOffset(),l=n.getEndKey(),s=n.getEndOffset(),u=i.skipUntil((function(e,t){return t===a})).takeUntil((function(e,t){return t===l})).concat(t.Map([[l,i.get(l)]])).map((function(e,t){var n,i;a===l?(n=c,i=s):(n=t===a?c:0,i=t===l?s:e.getLength());for(var u,f=e.getCharacterList();n<i;)u=f.get(n),f=f.set(n,o?A.applyStyle(u,r):A.removeStyle(u,r)),n++;return e.set("characterList",f)}));return e.merge({blockMap:i.merge(u),selectionBefore:n,selectionAfter:n})}function $(e,n,r){var o=e.getBlockMap(),i=n.getStartKey(),a=n.getStartOffset(),c=n.getEndKey(),l=n.getEndOffset(),s=o.skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===c})).toOrderedMap().merge(t.OrderedMap([[c,o.get(c)]])).map((function(e,t){var n=t===i?a:0,o=t===c?l:e.getLength();return function(e,t,n,r){for(var o=e.getCharacterList();t<n;)o=o.set(t,A.applyEntity(o.get(t),r)),t++;return e.set("characterList",o)}(e,n,o,r)}));return e.merge({blockMap:o.merge(s),selectionBefore:n,selectionAfter:n})}var Q=function(e,t,n,r,o){var i=n.split(" ");i=i.map((function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<i.length-1)return e+" ";return e}));for(var a,c=r,l=null,s=null,u=0;u<i.length;u++){if(e<(a=c+i[u].length)&&c<t)null!==l?s=a:(l=c,s=a);else if(null!==l)break;c=a}var f=r+n.length,g=l===r,p=s===f;return(!g&&p||g&&!p)&&("forward"===o?s!==f&&s++:l!==r&&l--),{start:l,end:s}};function Z(e,t,r,o,i,a,c){var l=r.getStartOffset(),s=r.getEndOffset(),u=e.__get(i).getMutability(),f=c?l:s;if("MUTABLE"===u)return r;var g=function(e,t){var r=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){r.push({start:e,end:t})})),n(!!r.length,"Entity key not found in this range."),r}(t,i).filter((function(e){return f<=e.end&&f>=e.start}));n(1==g.length,"There should only be one entity range within this removal range.");var p=g[0];if("IMMUTABLE"===u)return r.merge({anchorOffset:p.start,focusOffset:p.end,isBackward:!1});a||(c?s=p.end:l=p.start);var d=Q(l,s,t.getText().slice(p.start,p.end),p.start,o);return r.merge({anchorOffset:d.start,focusOffset:d.end,isBackward:!1})}var ee={},te=Math.pow(2,32);function ne(){for(var e;void 0===e||ee.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*te).toString(32);return ee[e]=!0,e}var re=function(e){return e.first()instanceof G?function(e){var n,r={};return t.OrderedMap(e.withMutations((function(e){e.forEach((function(t,o){var i=t.getKey(),a=t.getNextSiblingKey(),c=t.getPrevSiblingKey(),l=t.getChildKeys(),s=t.getParentKey(),u=ne();(r[i]=u,a)&&(e.get(a)?e.setIn([a,"prevSibling"],u):e.setIn([i,"nextSibling"],null));c&&(e.get(c)?e.setIn([c,"nextSibling"],u):e.setIn([i,"prevSibling"],null));if(s&&e.get(s)){var f=e.get(s).getChildKeys();e.setIn([s,"children"],f.set(f.indexOf(t.getKey()),u))}else e.setIn([i,"parent"],null),n&&(e.setIn([n.getKey(),"nextSibling"],u),e.setIn([i,"prevSibling"],r[n.getKey()])),n=e.get(i);l.forEach((function(n){e.get(n)?e.setIn([n,"parent"],u):e.setIn([i,"children"],t.getChildKeys().filter((function(e){return e!==n})))}))}))})).toArray().map((function(e){return[r[e.getKey()],e.set("key",r[e.getKey()])]})))}(e):function(e){return t.OrderedMap(e.toArray().map((function(e){var t=ne();return[t,e.set("key",t)]})))}(e)};function oe(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),o={},i=t.getStartKey(),a=t.getStartOffset(),c=n.get(i),l=ie(r,c,a);l!==c&&(o[i]=l);var s=t.getEndKey(),u=t.getEndOffset(),f=n.get(s);i===s&&(f=l);var g=ie(r,f,u);return g!==f&&(o[s]=g),Object.keys(o).length?e.merge({blockMap:n.merge(o),selectionAfter:t}):e.set("selectionAfter",t)}function ie(e,t,r){var o=t.getCharacterList(),i=r>0?o.get(r-1):void 0,a=r<o.count()?o.get(r):void 0,c=i?i.getEntity():void 0,l=a?a.getEntity():void 0;if(l&&l===c&&"MUTABLE"!==e.__get(l).getMutability()){for(var s=function(e,t,r){var o;return N(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=r&&t>=r&&(o={start:e,end:t})})),n("object"==typeof o,"Removal range must exist within character list."),o}(o,l,r),u=s.start,f=s.end,g=void 0;u<f;)g=o.get(u),o=o.set(u,A.applyEntity(g,null)),u++;return t.set("characterList",o)}return t}var ae=function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=t.getEndKey(),i=t.getEndOffset(),a=oe(e,t).getBlockMap(),c=a.keySeq(),l=c.indexOf(n),s=c.indexOf(o)+1;return re(a.slice(l,s).map((function(e,t){var a=e.getText(),c=e.getCharacterList();return n===o?e.merge({text:a.slice(r,i),characterList:c.slice(r,i)}):t===n?e.merge({text:a.slice(r),characterList:c.slice(r)}):t===o?e.merge({text:a.slice(0,i),characterList:c.slice(0,i)}):e})))};function ce(e,t,n){var r=e;if(n===r.count())t.forEach((function(e){r=r.push(e)}));else if(0===n)t.reverse().forEach((function(e){r=r.unshift(e)}));else{var o=r.slice(0,n),i=r.slice(n);r=o.concat(t,i).toList()}return r}var le=function(e,n,r,o,i,a){var c=r.first()instanceof G,l=[],s=o.size,u=r.get(i),f=o.first(),g=o.last(),p=g.getLength(),d=g.getKey(),h=c&&(!u.getChildKeys().isEmpty()||!f.getChildKeys().isEmpty());r.forEach((function(e,t){t===i?(h?l.push(e):l.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.slice(0,t),a=o.slice(0,t),c=n.first();return e.merge({text:i+c.getText(),characterList:a.concat(c.getCharacterList()),type:i?e.getType():c.getType(),data:c.getData()})}(e,a,o)),o.slice(h?0:1,s-1).forEach((function(e){return l.push(e)})),l.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.length,a=r.slice(t,i),c=o.slice(t,i),l=n.last();return l.merge({text:l.getText()+a,characterList:l.getCharacterList().concat(c),data:l.getData()})}(e,a,o))):l.push(e)}));var y=B.createFromArray(l);return c&&(y=function(e,n,r,o){return e.withMutations((function(n){var i=r.getKey(),a=o.getKey(),c=r.getNextSiblingKey(),l=r.getParentKey(),s=function(e,t){var n=e.getKey(),r=e,o=[];for(t.get(n)&&o.push(n);r&&r.getNextSiblingKey();){var i=r.getNextSiblingKey();if(!i)break;o.push(i),r=t.get(i)}return o}(o,e),u=s[s.length-1];if(n.get(a)?(n.setIn([i,"nextSibling"],a),n.setIn([a,"prevSibling"],i)):(n.setIn([i,"nextSibling"],o.getNextSiblingKey()),n.setIn([o.getNextSiblingKey(),"prevSibling"],i)),n.setIn([u,"nextSibling"],c),c&&n.setIn([c,"prevSibling"],u),s.forEach((function(e){return n.setIn([e,"parent"],l)})),l){var f=e.get(l).getChildKeys(),g=f.indexOf(i)+1,p=f.toArray();p.splice.apply(p,w([g,0],s)),n.setIn([l,"children"],t.List(p))}}))}(y,0,u,f)),e.merge({blockMap:y,selectionBefore:n,selectionAfter:n.merge({anchorKey:d,anchorOffset:p,focusKey:d,focusOffset:p,isBackward:!1})})},se=function(e,t,r,o){void 0===o&&(o="REPLACE_WITH_NEW_DATA"),n(t.isCollapsed(),"`insertFragment` should only be called with a collapsed selection state.");var i=e.getBlockMap(),a=re(r),c=t.getStartKey(),l=t.getStartOffset(),s=i.get(c);return s instanceof G&&n(s.getChildKeys().isEmpty(),"`insertFragment` should not be called when a container node is selected."),1===a.size?function(e,t,n,r,o,i,a){void 0===a&&(a="REPLACE_WITH_NEW_DATA");var c=n.get(o),l=c.getText(),s=c.getCharacterList(),u=o,f=i+r.getText().length,g=null;switch(a){case"MERGE_OLD_DATA_TO_NEW_DATA":g=r.getData().merge(c.getData());break;case"REPLACE_WITH_NEW_DATA":g=r.getData()}var p=c.merge({text:l.slice(0,i)+r.getText()+l.slice(i),characterList:ce(s,r.getCharacterList(),i),data:g});return e.merge({blockMap:n.set(o,p),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:f,focusKey:u,focusOffset:f,isBackward:!1})})}(e,t,i,a.first(),c,l,o):le(e,t,i,a,c,l)};function ue(e,n,r){var o=n.getStartKey(),i=n.getEndKey(),a=e.getBlockMap(),c=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat(t.Map([[i,a.get(i)]])).map(r);return e.merge({blockMap:a.merge(c),selectionBefore:n,selectionAfter:n})}var fe=function(e,t){if(!(e instanceof G))return null;var n=e.getNextSiblingKey();if(n)return n;var r=e.getParentKey();if(!r)return null;for(var o=t.get(r);o&&!o.getNextSiblingKey();){var i=o.getParentKey();o=i?t.get(i):null}return o?o.getNextSiblingKey():null},ge=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},pe=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var o=r.getParentKey();o&&n.push(o),r=o?t.get(o):null}return n},de=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},he=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},ye=function(e,t,n,r){return e.withMutations((function(o){if(ge(t.getKey(),o,(function(e){return e.merge({nextSibling:de(e,o,r),prevSibling:he(e,o,r)})})),ge(n.getKey(),o,(function(e){return e.merge({nextSibling:de(e,o,r),prevSibling:he(e,o,r)})})),pe(t.getKey(),r).forEach((function(e){return ge(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:de(e,o,r),prevSibling:he(e,o,r)})}))})),ge(t.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),ge(t.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:de(e,o,r)})})),ge(n.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:he(e,o,r)})})),ge(n.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:n.getNextSiblingKey()})})),pe(n.getKey(),r).forEach((function(e){ge(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:de(e,o,r),prevSibling:he(e,o,r)})}))})),function(e,t){var n=[];if(!e)return n;for(var r=fe(e,t);r&&t.get(r);){var o=t.get(r);n.push(r),r=o.getParentKey()?fe(o,t):null}return n}(n,r).forEach((function(e){return ge(e,o,(function(e){return e.merge({nextSibling:de(e,o,r),prevSibling:he(e,o,r)})}))})),null==e.get(t.getKey())&&null!=e.get(n.getKey())&&n.getParentKey()===t.getKey()&&null==n.getPrevSiblingKey()){var i=t.getPrevSiblingKey();ge(n.getKey(),o,(function(e){return e.merge({prevSibling:i})})),ge(i,o,(function(e){return e.merge({nextSibling:n.getKey()})}));var a=i?e.get(i):null,c=a?a.getParentKey():null;if(t.getChildKeys().forEach((function(e){ge(e,o,(function(e){return e.merge({parent:c})}))})),null!=c){var l=e.get(c);ge(c,o,(function(e){return e.merge({children:l.getChildKeys().concat(t.getChildKeys())})}))}ge(t.getChildKeys().find((function(t){return null===e.get(t).getNextSiblingKey()})),o,(function(e){return e.merge({nextSibling:t.getNextSiblingKey()})}))}}))},ve=function(e,n){if(n.isCollapsed())return e;var r,o=e.getBlockMap(),i=n.getStartKey(),a=n.getStartOffset(),c=n.getEndKey(),l=n.getEndOffset(),s=o.get(i),u=o.get(c),f=s instanceof G,g=[];if(f){var p=u.getChildKeys(),d=pe(c,o);u.getNextSiblingKey()&&(g=g.concat(d)),p.isEmpty()||(g=g.concat(d.concat([c]))),g=g.concat(pe(fe(u,o),o))}r=s===u?me(s.getCharacterList(),a,l):s.getCharacterList().slice(0,a).concat(u.getCharacterList().slice(l));var h=s.merge({text:s.getText().slice(0,a)+u.getText().slice(l),characterList:r}),y=f&&0===a&&0===l&&u.getParentKey()===i&&null==u.getPrevSiblingKey()?t.Map([[i,null]]):o.toSeq().skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===c})).filter((function(e,t){return-1===g.indexOf(t)})).concat(t.Map([[c,null]])).map((function(e,t){return t===i?h:null})),v=o.merge(y).filter((function(e){return!!e}));return f&&s!==u&&(v=ye(v,s,u,o)),e.merge({blockMap:v,selectionBefore:n,selectionAfter:n.merge({anchorKey:i,anchorOffset:a,focusKey:i,focusOffset:a,isBackward:!1})})},me=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),o=e.slice(n);e=r.concat(o).toList()}return e},Se=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},be=function(e,r){n(r.isCollapsed(),"Selection range must be collapsed.");var o=r.getAnchorKey(),i=e.getBlockMap(),a=i.get(o),c=a.getText();if(!c){var l=a.getType();if("unordered-list-item"===l||"ordered-list-item"===l)return ue(e,r,(function(e){return e.merge({type:"unstyled",depth:0})}))}var s=r.getAnchorOffset(),u=a.getCharacterList(),f=ne(),g=a instanceof G,p=a.merge({text:c.slice(0,s),characterList:u.slice(0,s)}),d=p.merge({key:f,text:c.slice(s),characterList:u.slice(s),data:t.Map()}),h=i.toSeq().takeUntil((function(e){return e===a})),y=i.toSeq().skipUntil((function(e){return e===a})).rest(),v=h.concat([[o,p],[f,d]],y).toOrderedMap();return g&&(n(a.getChildKeys().isEmpty(),"ContentBlockNode must not have children"),v=function(e,n,r){return e.withMutations((function(e){var o=n.getKey(),i=r.getKey();Se(n.getParentKey(),e,(function(e){var n=e.getChildKeys(),r=n.indexOf(o)+1,a=n.toArray();return a.splice(r,0,i),e.merge({children:t.List(a)})})),Se(n.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:i})})),Se(o,e,(function(e){return e.merge({nextSibling:i})})),Se(i,e,(function(e){return e.merge({prevSibling:o})}))}))}(v,p,d)),e.merge({blockMap:v,selectionBefore:r,selectionAfter:r.merge({anchorKey:f,anchorOffset:0,focusKey:f,focusOffset:0,isBackward:!1})})},Ce={replaceText:function(e,r,o,i,a){var c=oe(e,r),l=ve(c,r),s=A.create({style:i||t.OrderedSet(),entity:a||null});return function(e,r,o,i){n(r.isCollapsed(),"`insertText` should only be called with a collapsed range.");var a=null;if(null!=o&&(a=o.length),null==a||0===a)return e;var c=e.getBlockMap(),l=r.getStartKey(),s=r.getStartOffset(),u=c.get(l),f=u.getText(),g=u.merge({text:f.slice(0,s)+o+f.slice(s,u.getLength()),characterList:ce(u.getCharacterList(),t.Repeat(i,a).toList(),s)}),p=s+a;return e.merge({blockMap:c.set(l,g),selectionAfter:r.merge({anchorOffset:p,focusOffset:p})})}(l,l.getSelectionAfter(),o,s)},insertText:function(e,t,r,o,i){return n(t.isCollapsed(),"Target range must be collapsed for `insertText`."),Ce.replaceText(e,t,r,o,i)},moveText:function(e,t,n){var r=ae(e,t),o=Ce.removeRange(e,t,"backward");return Ce.replaceWithFragment(o,n,r)},replaceWithFragment:function(e,t,n,r){void 0===r&&(r="REPLACE_WITH_NEW_DATA");var o=oe(e,t),i=ve(o,t);return se(i,i.getSelectionAfter(),n,r)},removeRange:function(e,t,n){var r,o,i,a;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),o=t.getFocusKey(),i=e.getBlockForKey(r),a=e.getBlockForKey(o);var c=t.getStartOffset(),l=t.getEndOffset(),s=i.getEntityAt(c),u=a.getEntityAt(l-1);if(r===o&&s&&s===u){var f=function(e,t,n,r,o){var i=r.getStartOffset(),a=r.getEndOffset(),c=t.getEntityAt(i),l=n.getEntityAt(a-1);if(!c&&!l)return r;var s=r;if(c&&c===l)s=Z(e,t,s,o,c,!0,!0);else if(c&&l){var u=Z(e,t,s,o,c,!1,!0),f=Z(e,n,s,o,l,!1,!1);s=s.merge({anchorOffset:u.getAnchorOffset(),focusOffset:f.getFocusOffset(),isBackward:!1})}else if(c){u=Z(e,t,s,o,c,!1,!0);s=s.merge({anchorOffset:u.getStartOffset(),isBackward:!1})}else if(l){f=Z(e,n,s,o,l,!1,!1);s=s.merge({focusOffset:f.getEndOffset(),isBackward:!1})}return s}(e.getEntityMap(),i,a,t,n);return ve(e,f)}var g=oe(e,t);return ve(g,t)},splitBlock:function(e,t){var n=oe(e,t),r=ve(n,t);return be(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return J(e,t,n)},removeInlineStyle:function(e,t,n){return X(e,t,n)},setBlockType:function(e,t,n){return ue(e,t,(function(e){return e.merge({type:n,depth:0})}))},setBlockData:function(e,t,n){return ue(e,t,(function(e){return e.merge({data:n})}))},mergeBlockData:function(e,t,n){return ue(e,t,(function(e){return e.merge({data:e.getData().merge(n)})}))},applyEntity:function(e,t,n){return $(oe(e,t),t,n)}},ke=function(){return!0},Ee=t.Record({start:null,end:null}),Ke=t.Record({start:null,end:null,decoratorKey:null,leaves:null}),_e=function(e,n,r){var o=n.getLength();if(!o)return t.List.of(new Ke({start:0,end:0,decoratorKey:null,leaves:t.List.of(new Ee({start:0,end:0}))}));var i=[],a=r?r.getDecorations(n,e):t.List(t.Repeat(null,o)),c=n.getCharacterList();return N(a,De,ke,(function(e,t){i.push(new Ke({start:e,end:t,decoratorKey:a.get(e),leaves:xe(c.slice(e,t).toList(),e)}))})),t.List(i)};function xe(e,n){var r=[];return N(e.map((function(e){return e.getStyle()})).toList(),De,ke,(function(e,t){r.push(new Ee({start:e+n,end:t+n}))})),t.List(r)}function De(e,t){return e===t}var Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}(t.Record({type:"TOKEN",mutability:"IMMUTABLE",data:Object})),we=t.Map(),Be=0;function Me(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var Oe={getLastCreatedEntityKey:function(){return Me("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),Oe.__getLastCreatedEntityKey()},create:function(e,t,n){return Me("DraftEntity.create","contentState.createEntity"),Oe.__create(e,t,n)},add:function(e){return Me("DraftEntity.add","contentState.addEntity"),Oe.__add(e)},get:function(e){return Me("DraftEntity.get","contentState.getEntity"),Oe.__get(e)},mergeData:function(e,t){return Me("DraftEntity.mergeData","contentState.mergeEntityData"),Oe.__mergeData(e,t)},replaceData:function(e,t){return Me("DraftEntity.replaceData","contentState.replaceEntityData"),Oe.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+Be},__create:function(e,t,n){return Oe.__add(new Te({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++Be;return we=we.set(t,e),t},__get:function(e){var t=we.get(e);return n(!!t,"Unknown DraftEntity key: %s.",e),t},__mergeData:function(e,t){var n=Oe.__get(e),r=T(T({},n.getData()),t),o=n.set("data",r);return we=we.set(e,o),o},__replaceData:function(e,t){var n=Oe.__get(e).set("data",t);return we=we.set(e,n),n}},Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),o=this.getFocusKey();if(r===o&&r===e){var i=this.getStartOffset(),a=this.getEndOffset();return t<=i&&i<=n||t<=a&&a<=n}if(e!==r&&e!==o)return!1;var c=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=c&&n>=c},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}(t.Record({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));function Le(e){return!("undefined"==typeof window||!window.__DRAFT_GKX)&&!!window.__DRAFT_GKX[e]}var Fe=new RegExp("\r","g");function Ne(e){return e.replace(Fe,"")}var Ie,Re=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return D(n,e),n.prototype.getEntityMap=function(){return Oe},n.prototype.getBlockMap=function(){return this.get("blockMap")},n.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},n.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},n.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},n.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},n.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},n.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,n){return n===e})).skip(1).first()},n.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,n){return n===e})).skip(1).first()},n.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},n.prototype.getFirstBlock=function(){return this.getBlockMap().first()},n.prototype.getLastBlock=function(){return this.getBlockMap().last()},n.prototype.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},n.prototype.getLastCreatedEntityKey=function(){return Oe.__getLastCreatedEntityKey()},n.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||escape(e.first().getText()).replace(/%u200B/g,"").length>0},n.prototype.createEntity=function(e,t,n){return Oe.__create(e,t,n),this},n.prototype.mergeEntityData=function(e,t){return Oe.__mergeData(e,t),this},n.prototype.replaceEntityData=function(e,t){return Oe.__replaceData(e,t),this},n.prototype.addEntity=function(e){return Oe.__add(e),this},n.prototype.getEntity=function(e){return Oe.__get(e)},n.createFromBlockArray=function(e,t){var r=Array.isArray(e)?e:e.contentBlocks,o=B.createFromArray(r),i=o.isEmpty()?new Ae:Ae.createEmpty(o.first().getKey());return new n({blockMap:o,entityMap:t||Oe,selectionBefore:i,selectionAfter:i})},n.createFromText=function(e,r){void 0===r&&(r=/\r\n?|\n/g);var o=e.split(r).map((function(e){return e=Ne(e),new(Le("draft_tree_data_support")?G:U)({key:ne(),text:e,type:"unstyled",characterList:t.List(t.Repeat(A.EMPTY,e.length))})}));return n.createFromBlockArray(o)},n}(t.Record({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null})),Pe=function(e,n){Ie?Ie.reset():Ie=new r;var i=e.getBlockMap(),a=i.valueSeq().map((function(e){return o(Ie).getDirection(e.getText())})),c=t.OrderedMap(i.keySeq().zip(a));return null!=n&&t.is(n,c)?n:c},Ue={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:t.Stack(),selection:null,treeMap:null,undoStack:t.Stack()},He=t.Record(Ue),je=function(){function e(e){this._immutable=e}return e.createEmpty=function(t){return e.createWithContent(Re.createFromText(""),t)},e.createWithContent=function(n,r){if(0===n.getBlockMap().count())return e.createEmpty(r);var o=n.getBlockMap().first().getKey();return e.create({currentContent:n,undoStack:t.Stack(),redoStack:t.Stack(),decorator:r||null,selection:Ae.createEmpty(o)})},e.create=function(t){var n=t.currentContent,r=t.decorator,o=T(T({},t),{treeMap:We(n,r),directionMap:Pe(n)});return new e(new He(o))},e.set=function(t,n){return new e(t.getImmutable().withMutations((function(e){var r=e.get("decorator"),o=r;null===n.decorator?o=null:n.decorator&&(o=n.decorator);var i=n.currentContent||t.getCurrentContent();if(o!==r){var a=e.get("treeMap"),c=void 0;return c=o&&r?function(e,t,n,r,o){return n.merge(t.toSeq().filter((function(t){return r.getDecorations(t,e)!==o.getDecorations(t,e)})).map((function(t){return _e(e,t,r)})))}(i,i.getBlockMap(),a,o,r):We(i,o),void e.merge({decorator:o,treeMap:c,nativelyRenderedContent:null})}i!==t.getCurrentContent()&&e.set("treeMap",function(e,t,n,r){var o=e.getCurrentContent().set("entityMap",n),i=o.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter((function(e,t){return e!==i.get(t)})).map((function(e){return _e(o,e,r)})))}(t,i.getBlockMap(),i.getEntityMap(),o)),e.merge(n)})))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r>0)return o.getInlineStyleAt(r-1);if(o.getLength())return o.getInlineStyleAt(0);return ze(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r<o.getLength())return o.getInlineStyleAt(r);if(r>0)return o.getInlineStyleAt(r-1);return ze(e,n)}(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return qe(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),qe(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent().getLastBlock(),r=n.getKey(),o=n.getLength();return e.acceptSelection(t,new Ae({anchorKey:r,anchorOffset:o,focusKey:r,focusOffset:o,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(n,r,o,i){if(void 0===i&&(i=!0),n.getCurrentContent()===r)return n;var a=Pe(r,n.getDirectionMap());if(!n.getAllowUndo())return e.set(n,{currentContent:r,directionMap:a,lastChangeType:o,selection:r.getSelectionAfter(),forceSelection:i,inlineStyleOverride:null});var c=n.getSelection(),l=n.getCurrentContent(),s=n.getUndoStack(),u=r;c!==l.getSelectionAfter()||function(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(n,o)?(s=s.push(l),u=u.set("selectionBefore",c)):"insert-characters"!==o&&"backspace-character"!==o&&"delete-character"!==o||(u=u.set("selectionBefore",l.getSelectionBefore()));var f=n.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(o)&&(f=null);var g={currentContent:u,directionMap:a,undoStack:s,redoStack:t.Stack(),lastChangeType:o,selection:r.getSelectionAfter(),forceSelection:i,inlineStyleOverride:f};return e.set(n,g)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),i=Pe(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:i,undoStack:n.shift(),redoStack:t.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),i=Pe(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:i,undoStack:t.getUndoStack().push(o),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();function qe(e,t,n){return je.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function We(e,t){return e.getBlockMap().map((function(n){return _e(e,n,t)})).toOrderedMap()}function ze(e,n){var r=e.getBlockMap().reverse().skipUntil((function(e,t){return t===n})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return r?r.getInlineStyleAt(r.getLength()-1):t.OrderedSet()}var Ve=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},Ge=function(e,n,r,o,i){if(!i)return e;var a="after"===o,c=n.getKey(),l=r.getKey(),s=n.getParentKey(),u=n.getNextSiblingKey(),f=n.getPrevSiblingKey(),g=r.getParentKey(),p=a?r.getNextSiblingKey():l,d=a?l:r.getPrevSiblingKey();return e.withMutations((function(e){Ve(s,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(c))})})),Ve(f,e,(function(e){return e.merge({nextSibling:u})})),Ve(u,e,(function(e){return e.merge({prevSibling:f})})),Ve(p,e,(function(e){return e.merge({prevSibling:c})})),Ve(d,e,(function(e){return e.merge({nextSibling:c})})),Ve(g,e,(function(e){var n=e.getChildKeys(),r=n.indexOf(l),o=a?r+1:0!==r?r-1:0,i=n.toArray();return i.splice(o,0,c),e.merge({children:t.List(i)})})),Ve(c,e,(function(e){return e.merge({nextSibling:p,prevSibling:d,parent:g})}))}))},Je=function(e,r,o,i){n("replace"!==i,"Replacing blocks is not supported.");var a=o.getKey(),c=r.getKey();n(c!==a,"Block cannot be moved next to itself.");var l=e.getBlockMap(),s=r instanceof G,u=[r],f=l.delete(c);s&&(u=[],f=l.withMutations((function(e){var t=r.getNextSiblingKey(),n=fe(r,e);e.toSeq().skipUntil((function(e){return e.getKey()===c})).takeWhile((function(e){var r=e.getKey(),o=r===c,i=t&&r!==t,a=!t&&e.getParentKey()&&(!n||r!==n);return!!(o||i||a)})).forEach((function(t){u.push(t),e.delete(t.getKey())}))})));var g=f.toSeq().takeUntil((function(e){return e===o})),p=f.toSeq().skipUntil((function(e){return e===o})).skip(1),d=u.map((function(e){return[e.getKey(),e]})),h=t.OrderedMap();if("before"===i){var y=e.getBlockBefore(a);n(!y||y.getKey()!==r.getKey(),"Block cannot be moved next to itself."),h=g.concat(w(d,[[a,o]]),p).toOrderedMap()}else if("after"===i){var v=e.getBlockAfter(a);n(!v||v.getKey()!==c,"Block cannot be moved next to itself."),h=g.concat(w([[a,o]],d),p).toOrderedMap()}return e.merge({blockMap:Ge(h,r,o,i,s),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:c,focusKey:c})})},Xe=Le("draft_tree_data_support"),Ye=Xe?G:U,$e={insertAtomicBlock:function(e,n,r){var o=e.getCurrentContent(),i=e.getSelection(),a=Ce.removeRange(o,i,"backward"),c=a.getSelectionAfter(),l=Ce.splitBlock(a,c),s=l.getSelectionAfter(),u=Ce.setBlockType(l,s,"atomic"),f=A.create({entity:n}),g={key:ne(),type:"atomic",text:r,characterList:t.List(t.Repeat(f,r.length))},p={key:ne(),type:"unstyled"};Xe&&(g=T(T({},g),{nextSibling:p.key}),p=T(T({},p),{prevSibling:g.key}));var d=[new Ye(g),new Ye(p)],h=B.createFromArray(d),y=Ce.replaceWithFragment(u,s,h),v=y.merge({selectionBefore:i,selectionAfter:y.getSelectionAfter().set("hasFocus",!0)});return je.push(e,v,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var o,i=e.getCurrentContent(),a=e.getSelection();if("before"===r||"after"===r){var c=i.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());o=Je(i,t,c,r)}else{var l=Ce.removeRange(i,n,"backward"),s=l.getSelectionAfter();c=l.getBlockForKey(s.getFocusKey());if(0===s.getStartOffset())o=Je(l,t,c,"before");else if(s.getEndOffset()===c.getLength())o=Je(l,t,c,"after");else{var u=Ce.splitBlock(l,s),f=u.getSelectionAfter(),g=u.getBlockForKey(f.getFocusKey());o=Je(u,t,g,"before")}}var p=o.merge({selectionBefore:a,selectionAfter:o.getSelectionAfter().set("hasFocus",!0)});return je.push(e,p,"move-block")}},Qe=function(){function e(e){this._decorators=e.slice()}return e.prototype.getDecorations=function(e,n){var r=Array(e.getText().length).fill(null);return this._decorators.forEach((function(t,o){var i=0;(0,t.strategy)(e,(function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(r,e,t)&&(!function(e,t,n,r){for(var o=t;o<n;o++)e[o]=r}(r,e,t,o+"."+i),i++)}),n)})),t.List(r)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();var Ze=i.createElement("ul",{className:a("public/DraftStyleDefault/ul")}),et=i.createElement("ol",{className:a("public/DraftStyleDefault/ol")}),tt=i.createElement("pre",{className:a("public/DraftStyleDefault/pre")}),nt=t.Map({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:Ze},"ordered-list-item":{element:"li",wrapper:et},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:tt},unstyled:{element:"div",aliasedElements:["p"]}}),rt={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}};function ot(e){return e&&e.ownerDocument?e.ownerDocument:document}function it(e){return!(!e||!e.ownerDocument)&&e.nodeType===Node.ELEMENT_NODE}function at(e){if(it(e)){var t=e,n=t.getAttribute("data-offset-key");if(n)return n;for(var r=0;r<t.childNodes.length;r++){var o=at(t.childNodes[r]);if(o)return o}}return null}function ct(e){for(var t=e;t&&t!==ot(e).documentElement;){var n=at(t);if(null!=n)return n;t=t.parentNode}return null}function lt(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}var st={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},ut=c.isBrowser("IE <= 11"),ft=function(){function e(e){var r=this;this.container=e,this.mutations=t.Map();var o=lt(e);o.MutationObserver&&!ut?this.observer=new o.MutationObserver((function(e){return r.registerMutations(e)})):this.onCharData=function(e){n(e.target instanceof Node,"Expected target to be an instance of Node"),r.registerMutation({type:"characterData",target:e.target})}}return e.prototype.start=function(){this.observer?this.observer.observe(this.container,st):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},e.prototype.stopAndFlushMutations=function(){var e=this.observer;e?(this.registerMutations(e.takeRecords()),e.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var n=this.mutations;return this.mutations=t.Map(),n},e.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},e.prototype.getMutationTextContent=function(e){var t=e.type,n=e.target,r=e.removedNodes;if("characterData"===t){if(""!==n.textContent)return n.textContent}else if("childList"===t){if(r&&r.length)return"";if(""!==n.textContent)return n.textContent}return null},e.prototype.registerMutation=function(e){var t=this.getMutationTextContent(e);if(null!=t){var n=o(ct(e.target));this.mutations=this.mutations.set(n,t)}},e}(),gt=function(e,t,n){return e+"-"+t+"-"+n},pt=function(e){var t=e.split("-").reverse(),n=t[0],r=t[1];return{blockKey:t.slice(2).reverse().join("-"),decoratorKey:parseInt(r,10),leafKey:parseInt(n,10)}},dt=function(e){return null},ht=function(e){return null};function yt(e){return!(!e||!e.ownerDocument)&&(e.ownerDocument.defaultView?e instanceof e.ownerDocument.defaultView.HTMLElement:e instanceof HTMLElement)}function vt(e){var t=s.findDOMNode(e.editorContainer);return n(t,"Missing editorNode"),n(yt(t.firstChild),"editorNode.firstChild is not an HTMLElement"),t.firstChild}function mt(e,t,n,r,i){var a=o(e.getSelection());if(window.__DEV__&&(!t||!r))return console.warn("Invalid selection state.",arguments,e.toJS()),a;var c=pt(t),l=c.blockKey,s=e.getBlockTree(l).getIn([c.decoratorKey,"leaves",c.leafKey]),u=pt(r),f=u.blockKey,g=e.getBlockTree(f).getIn([u.decoratorKey,"leaves",u.leafKey]);if(!s||!g)return window.__DEV__&&console.warn("Invalid selection state.",arguments,e.toJS()),a;var p=s.get("start"),d=g.get("start"),h=s?p+n:null,y=g?d+i:null,v=a.getAnchorKey()===l&&a.getAnchorOffset()===h&&a.getFocusKey()===f&&a.getFocusOffset()===y;if(v)return a;var m=!1;if(l===f){var S=s.get("end"),b=g.get("end");m=d===p&&b===S?i<n:d<p}else{var C=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===l||e===f})).first();m=C===f}return a.merge({anchorKey:l,anchorOffset:h,focusKey:f,focusOffset:y,isBackward:m})}function St(e,t,n,r,i,a){var c=n.nodeType===Node.TEXT_NODE,l=i.nodeType===Node.TEXT_NODE;if(c&&l)return{selectionState:mt(e,o(ct(n)),r,o(ct(i)),a),needsRecovery:!1};var s=null,u=null,f=!0;return c?(s={key:o(ct(n)),offset:r},u=bt(t,i,a)):l?(u={key:o(ct(i)),offset:a},s=bt(t,n,r)):(s=bt(t,n,r),u=bt(t,i,a),n===i&&r===a&&(f=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:mt(e,s.key,s.offset,u.key,u.offset),needsRecovery:f}}function bt(e,t,r){var i=t,a=ct(i);(n(null!=a||e&&(e===i||e.firstChild===i),"Unknown node in selection range."),e===i)&&(i=i.firstChild,n(it(i),"Invalid DraftEditorContents node."),n("true"===(i=i).getAttribute("data-contents"),"Invalid DraftEditorContents structure."),r>0&&(r=i.childNodes.length));if(0===r){var c=null;if(null!=a)c=a;else{var l=function(e){for(;e.firstChild&&(it(e.firstChild)&&"true"===e.firstChild.getAttribute("data-blocks")||at(e.firstChild));)e=e.firstChild;return e}(i);c=o(at(l))}return{key:c,offset:0}}var s=i.childNodes[r-1],u=null,f=null;if(at(s)){var g=function(e){for(;e.lastChild&&(it(e.lastChild)&&"true"===e.lastChild.getAttribute("data-blocks")||at(e.lastChild));)e=e.lastChild;return e}(s);u=o(at(g)),f=Ct(g)}else u=o(a),f=Ct(s);return t&&"object"===t.dataset.text&&(f=1),{key:u,offset:f}}function Ct(e){if(!e.isContentEditable)return 1;var t=e.textContent;return"\n"===t?0:t.length}function kt(e,t){var n=t.ownerDocument.defaultView.getSelection();return 0===n.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:St(e,t,n.anchorNode,n.anchorOffset,n.focusNode,n.focusOffset)}function Et(e,t){if(e._blockSelectEvents||e._latestEditorState!==e.props.editorState){if(e._blockSelectEvents){var n=e.props.editorState.getSelection();dt({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:(new Error).stack}),selectionState:JSON.stringify(n.toJS())})}}else{var r=e.props.editorState,o=kt(r,vt(e)),i=o.selectionState;i!==r.getSelection()&&(r=o.needsRecovery?je.forceSelection(r,i):je.acceptSelection(r,i),e.update(r))}}function Kt(e){return null!=e&&""!=e}function _t(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(r).getEntityAt(o-1))!==e.getBlockForKey(r).getEntityAt(o)?null:xt(e.getEntityMap(),n):null}var i=t.getStartKey(),a=t.getStartOffset(),c=e.getBlockForKey(i);return n=a===c.getLength()?null:c.getEntityAt(a),xt(e.getEntityMap(),n)}function xt(e,t){return Kt(t)&&"MUTABLE"===e.__get(t).getMutability()?t:null}var Dt=!1,Tt=!1,wt=null;var Bt={onCompositionStart:function(e){Tt=!0,function(e){wt||(wt=new ft(vt(e))).start()}(e)},onCompositionEnd:function(e){Dt=!1,Tt=!1,setTimeout((function(){Dt||Bt.resolveComposition(e)}),20)},onSelect:Et,onKeyDown:function(e,t){if(!Tt)return Bt.resolveComposition(e),void e._onKeyDown(t);t.which!==l.RIGHT&&t.which!==l.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===l.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!Tt){var t=o(wt).stopAndFlushMutations();wt=null,Dt=!0;var n=je.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),t.size){var r=n.getCurrentContent();t.forEach((function(e,t){var o=pt(t),i=o.blockKey,a=o.decoratorKey,c=o.leafKey,l=n.getBlockTree(i).getIn([a,"leaves",c]),s=l.start,u=l.end,f=n.getSelection().merge({anchorKey:i,focusKey:i,anchorOffset:s,focusOffset:u,isBackward:!1}),g=_t(r,f),p=r.getBlockForKey(i).getInlineStyleAt(s);r=Ce.replaceText(r,f,e,p,g),n=je.set(n,{currentContent:r})}));var i=kt(n,vt(e)).selectionState;e.restoreEditorDOM();var a=je.acceptSelection(n,i);e.update(je.push(a,r,"insert-characters"))}else e.update(n)}}},Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){var e=this.props,t=e.block,n=e.children,r=e.contentState,o=e.decorator,a=e.decoratorKey,c=e.direction,l=e.leafSet,s=e.text,g=t.getKey(),p=l.get("leaves"),d=o.getComponentForKey(a),h=o.getPropsForKey(a),y=gt(g,parseInt(a,10),0),v=s.slice(p.first().get("start"),p.last().get("end")),m=f.getHTMLDirIfDifferent(u.getDirection(v),c);return i.createElement(d,T({},h,{contentState:r,decoratedText:v,dir:m,key:y,entityKey:t.getEntityAt(l.get("start")),offsetKey:y}),n)},t}(i.Component),Ot=c.isBrowser("IE <= 11");var At=function(e){function t(t){var n=e.call(this,t)||this;return n._forceFlag=!1,n}return D(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this._node,r=""===e.children;n(it(t),"node is not an Element");var o=t;return r?!function(e){return Ot?"\n"===e.textContent:"BR"===e.tagName}(o):o.textContent!==e.children},t.prototype.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.prototype.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){var e=this;return""===this.props.children?this._forceFlag?function(e){return Ot?i.createElement("span",{key:"A","data-text":"true",ref:e},"\n"):i.createElement("br",{key:"A","data-text":"true",ref:e})}((function(t){return e._node=t})):function(e){return Ot?i.createElement("span",{key:"B","data-text":"true",ref:e},"\n"):i.createElement("br",{key:"B","data-text":"true",ref:e})}((function(t){return e._node=t})):i.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(t){return e._node=t}},this.props.children)},t}(i.Component);function Lt(e){return!(!e||!e.ownerDocument)&&(it(e)&&"BR"===e.nodeName)}var Ft=function(){},Nt=function(){};function It(e,t){if(!e)return"[empty]";var r=function e(t,n){var r=void 0!==n?n(t):[];if(t.nodeType===Node.TEXT_NODE){var o=t.textContent.length;return ot(t).createTextNode("[text "+o+(r.length?" | "+r.join(", "):"")+"]")}var i=t.cloneNode();1===i.nodeType&&r.length&&i.setAttribute("data-labels",r.join(", "));for(var a=t.childNodes,c=0;c<a.length;c++)i.appendChild(e(a[c],n));return i}(e,t);return r.nodeType===Node.TEXT_NODE?r.textContent:(n(it(r),"Node must be an Element if it is not a text node."),r.outerHTML)}function Rt(e,t){for(var n=e,r=n;n;){if(it(n)&&r.hasAttribute("contenteditable"))return It(n,t);r=n=n.parentNode}return"Could not find contentEditable parent of node"}function Pt(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function Ut(e,t,n,r,o){var i=ot(t);if(g(i.documentElement,t)){var a=i.defaultView.getSelection(),c=e.getAnchorKey(),l=e.getAnchorOffset(),s=e.getFocusKey(),u=e.getFocusOffset(),f=e.getIsBackward();if(!a.extend&&f){var p=c,d=l;c=s,l=u,s=p,u=d,f=!1}var h=c===n&&r<=l&&o>=l,y=s===n&&r<=u&&o>=u;if(h&&y)return a.removeAllRanges(),jt(a,t,l-r,e),void Ht(a,t,u-r,e);if(f){if(y&&(a.removeAllRanges(),jt(a,t,u-r,e)),h){var v=a.focusNode,m=a.focusOffset;a.removeAllRanges(),jt(a,t,l-r,e),Ht(a,v,m,e)}}else h&&(a.removeAllRanges(),jt(a,t,l-r,e)),y&&Ht(a,t,u-r,e)}}function Ht(e,t,n,r){var o=p();if(e.extend&&g(o,t)){n>Pt(t)&&ht({anonymizedDom:Rt(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())});var i=t===e.focusNode;try{e.extend(t,n)}catch(a){throw ht({anonymizedDom:Rt(t,(function(t){var n=[];return t===o&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n})),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:i,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:a?""+a:null,offset:n},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),a}}else if(e.rangeCount>0){var a=e.getRangeAt(0);a.setEnd(t,n),e.addRange(a.cloneRange())}}function jt(e,t,n,r){var o=ot(t).createRange();n>Pt(t)&&(ht({anonymizedDom:Rt(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())}),Nt()),o.setStart(t,n),e.addRange(o)}var qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype._setSelection=function(){var e=this.props,t=e.selection,r=e.isLast,o="custom"===this.leaf.dataset.type;if((r||!o)&&null!=t&&t.getHasFocus()){var i=this.props,a=i.block,c=i.start,l=i.text,s=a.getKey(),u=c+l.length;if((o||"object"==typeof l)&&(u=c+1),t.hasEdgeWithin(s,c,u))if(o)!function(e,t,n){var r=window.getSelection(),o=r.getRangeAt(0),i=t.parentElement,a=i.childNodes.length;if(e.isCollapsed())o.setStart(i,a),o.setEnd(i,a),r.removeAllRanges(),r.addRange(o)}(t,this.leaf);else if("object"!=typeof l){var f=this.leaf;n(f,"Missing node");var g,p=f.firstChild;n(p,"Missing child"),p.nodeType===Node.TEXT_NODE?g=p:Lt(p)?g=f:(g=p.firstChild,n(g,"Missing targetNode")),Ut(t,g,s,c,u)}else Ut(t,this.leaf.firstChild,s,c,u)}},t.prototype.shouldComponentUpdate=function(e){var t=this.leaf;return n(t,"Missing leafNode"),this.props.text!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this,t=this.props,n=t.block,r=t.isLast,o=t.custom,a=this.props.text;r&&"string"==typeof a&&a.endsWith("\n")&&(a+="\n");var c=this.props,l=c.customStyleMap,s=c.customStyleFn,u=c.offsetKey,f=c.styleSet,g=f.reduce((function(e,t){var n={},r=l[t];return void 0!==r&&e.textDecoration!==r.textDecoration&&(n.textDecoration=[e.textDecoration,r.textDecoration].join(" ").trim()),Object.assign(e,r,n)}),{});if(s){var p=s(f,n);g=Object.assign(g,p)}return o?i.createElement("span",{"data-offset-key":u,ref:function(t){return e.leaf=t},style:g,"data-type":"custom",contentEditable:!1},i.createElement("span",{"data-text":"object"},o),i.createElement("span",{"data-text":"r"},"\r")):"object"==typeof a?i.createElement("span",{"data-offset-key":u,ref:function(t){return e.leaf=t},style:g},i.createElement("span",{"data-text":"object"},a)):i.createElement("span",{"data-offset-key":u,ref:function(t){return e.leaf=t},style:g},i.createElement(At,null,a))},t}(i.Component);var Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){var e=this.props,t=e.block,n=e.contentState,r=e.customStyleFn,o=e.customStyleMap,c=e.decorator,l=e.direction,s=e.forceSelection,u=e.hasSelection,f=e.selection,g=e.tree,p=t.getKey(),d=t.getText(),h=g.size-1,y=this.props.children||g.map((function(e,a){var g=e.get("decoratorKey"),y=e.get("leaves"),v=y.size-1,m=y.map((function(e,n){var c=gt(p,a,n),l=e.get("start"),y=e.get("end");return i.createElement(qt,{key:c,offsetKey:c,block:t,start:l,selection:u?f:null,forceSelection:s,text:d.slice(l,y),styleSet:t.getInlineStyleAt(l),customStyleMap:o,customStyleFn:r,isLast:g===h&&n===v})})).toArray();return g&&c?i.createElement(Mt,{block:t,children:m,contentState:n,decorator:c,decoratorKey:g,direction:l,leafSet:e,text:d,key:a}):m})).toArray();return i.createElement("div",{"data-offset-key":gt(p,0,0),className:a({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===l,"public/DraftStyleDefault/rtl":"RTL"===l})},y)},t}(i.Component),zt=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},Vt=function(e,t){var n=t.get(e.getType())||t.get("unstyled"),r=n.wrapper;return{Element:n.element||t.get("unstyled").element,wrapperTemplate:r}},Gt=function(e,t){var n=t(e);return n?{CustomComponent:n.component,customProps:n.props,customEditable:n.editable}:{}},Jt=function(e,t,n,r,o){var i={"data-block":!0,"data-editor":t,"data-offset-key":n,key:e.getKey()},a=r(e);return a&&(i.className=a),void 0!==o.customEditable&&(i=T(T({},i),{contentEditable:o.customEditable,suppressContentEditableWarning:!0})),i},Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.block,r=t.direction,o=t.tree,i=!n.getChildKeys().isEmpty(),a=n!==e.block||o!==e.tree||r!==e.direction||zt(e.selection,e.block.getKey())&&e.forceSelection;return i||a},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r,o=s.findDOMNode(this),i=h.getScrollParent(o),a=v(i);if(i===window){var c=y(o);(r=c.y+c.height-m().height)>0&&window.scrollTo(a.x,a.y+r+10)}else{n(yt(o),"blockNode is not an HTMLElement");var l=o;(r=l.offsetHeight+l.offsetTop-(i.offsetHeight+a.y))>0&&d.setTop(i,d.getTop(i)+r+10)}}},t.prototype.render=function(){var e=this,n=this.props,r=n.block,o=n.blockRenderMap,a=n.blockRendererFn,c=n.blockStyleFn,l=n.contentState,s=n.decorator,u=n.editorKey,f=n.editorState,g=n.customStyleFn,p=n.customStyleMap,d=n.direction,h=n.forceSelection,y=n.selection,v=n.tree,m=null;r.children.size&&(m=r.children.reduce((function(n,r){var s=gt(r,0,0),g=l.getBlockForKey(r),p=Gt(g,a),d=p.CustomComponent||t,h=Vt(g,o),y=h.Element,v=h.wrapperTemplate,m=Jt(g,u,s,c,p),S=T(T({},e.props),{tree:f.getBlockTree(r),blockProps:p.customProps,offsetKey:s,block:g});return n.push(i.createElement(y,m,i.createElement(d,T({},S)))),!v||function(e,t){var n=e.getNextSiblingKey();return!!n&&t.getBlockForKey(n).getType()===e.getType()}(g,l)?n:(function(e,t,n){for(var r=[],o=0,a=n.reverse();o<a.length;o++){var c=a[o];if(c.type!==t)break;r.push(c)}n.splice(n.indexOf(r[0]),r.length+1);var l=r.reverse(),s=l[0].key;n.push(i.cloneElement(e,{key:s+"-wrap","data-offset-key":gt(s,0,0)},l))}(v,y,n),n)}),[]));var S=r.getKey(),b=gt(S,0,0),C=Gt(r,a),k=C.CustomComponent,E=null!=k?i.createElement(k,T({},this.props,{tree:f.getBlockTree(S),blockProps:C.customProps,offsetKey:b,block:r})):i.createElement(Wt,{block:r,children:m,contentState:l,customStyleFn:g,customStyleMap:p,decorator:s,direction:d,forceSelection:h,hasSelection:zt(y,S),selection:y,tree:v});if(r.getParentKey())return E;var K=Vt(r,o).Element,_=Jt(r,u,b,c,C);return i.createElement(K,_,E)},t}(i.Component),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&i)return!1;var a=t.getCurrentContent(),c=n.getCurrentContent(),l=t.getDecorator(),s=n.getDecorator();return o!==i||a!==c||l!==s||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,a=e.customStyleMap,c=e.customStyleFn,l=e.editorState,s=e.editorKey,u=e.textDirectionality,f=l.getCurrentContent(),g=l.getSelection(),p=l.mustForceSelection(),d=l.getDecorator(),h=o(l.getDirectionMap()),y=[],v=f.getBlocksAsArray()[0];v;){var m=v.getKey(),S={blockRenderMap:t,blockRendererFn:n,blockStyleFn:r,contentState:f,customStyleFn:c,customStyleMap:a,decorator:d,editorKey:s,editorState:l,forceSelection:p,selection:g,block:v,direction:u||h.get(m),tree:l.getBlockTree(m)},b=(t.get(v.getType())||t.get("unstyled")).wrapper;y.push({block:i.createElement(Xt,T({key:m},S)),wrapperTemplate:b,key:m,offsetKey:gt(m,0,0)});var C=v.getNextSiblingKey();v=C?f.getBlockForKey(C):null}for(var k=[],E=0;E<y.length;){var K=y[E];if(K.wrapperTemplate){var _=[];do{_.push(y[E].block),E++}while(E<y.length&&y[E].wrapperTemplate===K.wrapperTemplate);var x=i.cloneElement(K.wrapperTemplate,{key:K.key+"-wrap","data-offset-key":K.offsetKey},_);k.push(x)}else k.push(K.block),E++}return i.createElement("div",{"data-contents":"true"},k)},t}(i.Component),$t=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||$t(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r=this._node;if(null!=r){var o,i=h.getScrollParent(r),a=v(i);if(i===window){var c=y(r);(o=c.y+c.height-m().height)>0&&window.scrollTo(a.x,a.y+o+10)}else{n(yt(r),"blockNode is not an HTMLElement"),(o=r.offsetHeight+r.offsetTop-(i.offsetTop+i.offsetHeight+a.y))>0&&d.setTop(i,d.getTop(i)+o+10)}}}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),r=t.getText(),a=this.props.tree.size-1,c=$t(this.props.selection,n);return this.props.tree.map((function(l,s){var g=l.get("leaves");if(0===g.size)return null;var p=g.size-1,d=g.map((function(o,l){var u=gt(n,s,l),f=o.get("start"),g=o.get("end");return i.createElement(qt,{key:u,offsetKey:u,block:t,start:f,selection:c?e.props.selection:null,forceSelection:e.props.forceSelection,text:r.slice(f,g),styleSet:t.getInlineStyleAt(f),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:s===a&&l===p})})).toArray(),h=l.get("decoratorKey");if(null==h)return d;if(!e.props.decorator)return d;var y=o(e.props.decorator),v=y.getComponentForKey(h);if(!v)return d;var m=y.getPropsForKey(h),S=gt(n,s,0),b=g.first().get("start"),C=g.last().get("end"),k=r.slice(b,C),E=t.getEntityAt(l.get("start")),K=f.getHTMLDirIfDifferent(u.getDirection(k),e.props.direction),_={contentState:e.props.contentState,decoratedText:k,dir:K,key:S,start:b,end:C,blockKey:n,entityKey:E,offsetKey:S};return i.createElement(v,T({},m,_),d)})).toArray()},t.prototype.render=function(){var e=this,t=this.props,n=t.direction,r=t.offsetKey,o=a({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===n,"public/DraftStyleDefault/rtl":"RTL"===n});return i.createElement("div",{"data-offset-key":r,className:o,ref:function(t){return e._node=t}},this._renderChildren())},t}(i.Component),Zt=function(e,t,n,r){return a({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":t>=4,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&i)return!1;var a=t.getCurrentContent(),c=n.getCurrentContent(),l=t.getDecorator(),s=n.getDecorator();return o!==i||a!==c||l!==s||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,a=e.customStyleMap,c=e.customStyleFn,l=e.editorState,s=e.editorKey,u=e.textDirectionality,f=l.getCurrentContent(),g=l.getSelection(),p=l.mustForceSelection(),d=l.getDecorator(),h=o(l.getDirectionMap()),y=f.getBlocksAsArray(),v=[],m=null,b=null,C=0;C<y.length;C++){var k=y[C],E=k.getKey(),K=k.getType(),_=n(k),x=void 0,D=void 0,w=void 0;_&&(x=_.component,D=_.props,w=_.editable);var B=u||h.get(E),M=gt(E,0,0),O={contentState:f,block:k,blockProps:D,blockStyleFn:r,customStyleMap:a,customStyleFn:c,decorator:d,direction:B,forceSelection:p,offsetKey:M,selection:g,tree:l.getBlockTree(E)},A=t.get(K)||t.get("unstyled"),L=A.wrapper,F=A.element||t.get("unstyled").element,N=k.getDepth(),I="";if(r&&(I=r(k)),"li"===F)I=S(I,Zt(K,N,b!==L||null===m||N>m,B));var R=x||Qt,P={className:I,"data-block":!0,"data-editor":s,"data-offset-key":M,key:E};void 0!==w&&(P=T(T({},P),{contentEditable:w,suppressContentEditableWarning:!0}));var U=i.createElement(F,P,i.createElement(R,T({},O,{key:E})));v.push({block:U,wrapperTemplate:L,key:E,offsetKey:M}),m=L?k.getDepth():null,b=L}var H=[];for(C=0;C<v.length;){var j=v[C];if(j.wrapperTemplate){var q=[];do{q.push(v[C].block),C++}while(C<v.length&&v[C].wrapperTemplate===j.wrapperTemplate);var W=i.cloneElement(j.wrapperTemplate,{key:j.key+"-wrap","data-offset-key":j.offsetKey},q);H.push(W)}else H.push(j.block),C++}return i.createElement("div",{"data-contents":"true"},H)},t}(i.Component),tn=Le("draft_tree_data_support")?Yt:en,nn=/\.textClipping$/,rn={"text/plain":!0,"text/html":!0,"text/rtf":!0};function on(e,t){var r=0,o=[];e.forEach((function(i){!function(e,t){if(!global.FileReader||e.type&&!(e.type in rn))return void t("");if(""===e.type){var r="";return nn.test(e.name)&&(r=e.name.replace(nn,"")),void t(r)}var o=new FileReader;o.onload=function(){var e=o.result;n("string"==typeof e,'We should be calling "FileReader.readAsText" which returns a string'),t(e)},o.onerror=function(){t("")},o.readAsText(e)}(i,(function(n){r++,n&&o.push(n.slice(0,5e3)),r==e.length&&t(o.join("\r"))}))}))}function an(e){return"handled"===e||!0===e}var cn={onDragEnd:function(e){e.exitCurrentMode(),ln(e)},onDrop:function(e,t){var n=new b(t.nativeEvent.dataTransfer),r=e._latestEditorState,i=function(e,t){var n=null,r=null,i=ot(e.currentTarget);if("function"==typeof i.caretRangeFromPoint){var a=i.caretRangeFromPoint(e.x,e.y);n=a.startContainer,r=a.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=o(n),r=o(r);var c=o(ct(n));return mt(t,c,r,c,r)}(t.nativeEvent,r);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),null!=i){var a=n.getFiles();if(a.length>0){if(e.props.handleDroppedFiles&&an(e.props.handleDroppedFiles(i,a)))return;on(a,(function(t){t&&e.update(sn(r,i,t))}))}else{var c=e._internalDrag?"internal":"external";e.props.handleDrop&&an(e.props.handleDrop(i,n,c))||(e._internalDrag?e.update(function(e,t){var n=Ce.moveText(e.getCurrentContent(),e.getSelection(),t);return je.push(e,n,"insert-fragment")}(r,i)):e.update(sn(r,i,n.getText()))),ln(e)}}}};function ln(e){e._internalDrag=!1;var t=s.findDOMNode(e);if(t){var n=new MouseEvent("mouseup",{view:lt(t),bubbles:!0,cancelable:!0});t.dispatchEvent(n)}}function sn(e,t,n){var r=Ce.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return je.push(e,r,"insert-fragment")}var un=c.isBrowser("Firefox");function fn(e,t,n,r,o){var i=Ce.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return je.push(e,i,"insert-characters",o)}function gn(e){var t=e.getSelection();return t.isCollapsed()?null:ae(e.getCurrentContent(),t)}function pn(e,t){var n=e.getSelection();E(n.isCollapsed(),"moveSelectionBackward should only be called with a collapsed SelectionState");var r=e.getCurrentContent(),o=n.getStartKey(),i=n.getStartOffset(),a=o,c=0;if(t>i){var l=r.getKeyBefore(o);if(null==l)a=o;else a=l,c=r.getBlockForKey(l).getText().length}else c=i-t;return n.merge({focusKey:a,focusOffset:c,isBackward:!0})}var dn=Le("draft_tree_data_support");function hn(e,t,n){var r=e.getSelection(),o=e.getCurrentContent(),i=r,a=r.getAnchorKey(),c=r.getFocusKey(),l=o.getBlockForKey(a);if(dn&&"forward"===n&&a!==c)return o;if(r.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return o;if(dn)if(r.getAnchorOffset()===o.getBlockForKey(a).getLength()){var s=o.getBlockForKey(l.nextSibling);if(!s||0===s.getLength())return o}}else if(e.isSelectionAtStartOfContent())return o;if((i=t(e))===r)return o}return Ce.removeRange(o,i,n)}function yn(e){var t=hn(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),i=n.getBlockForKey(r).getText()[o-1];return pn(e,i?k.getUTF16Length(i,0):1)}),"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return je.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}var vn=c.isEngine("Gecko");var mn=c.isPlatform("Mac OS X"),Sn={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return mn&&e.altKey},usesMacOSHeuristics:function(){return mn},hasCommandModifier:function(e){return mn?!!e.metaKey&&!e.altKey:Sn.isCtrlKeyCommand(e)},isSoftNewlineEvent:function(e){return e.which===l.RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))}},bn=null,Cn=function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=null;if(n.isCollapsed()){var i=n.getAnchorKey(),a=t.getBlockForKey(i).getLength();if(a===n.getAnchorOffset()){var c=t.getKeyAfter(i);if(null==c)return e;r=n.set("focusKey",c).set("focusOffset",0)}else r=n.set("focusOffset",a)}else r=n;r=o(r),bn=ae(t,r);var l=Ce.removeRange(t,r,"forward");return l===t?e:je.push(e,l,"remove-range")},kn=function(e){if(!bn)return e;var t=Ce.replaceWithFragment(e.getCurrentContent(),e.getSelection(),bn);return je.push(e,t,"insert-fragment")};var En=c.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),r=[],o=e.endContainer;null!=o;o=o.parentNode){var i=o===e.commonAncestorContainer;i?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var a=Array.from(t.getClientRects());if(r.push(a),i)return r.reverse(),[].concat.apply([],r);t.setEndBefore(o)}n(!1,"Found an unexpected detached subtree when getting range client rects.")}:function(e){return Array.from(e.getClientRects())};function Kn(e,t){for(var n=1/0,r=1/0,o=-1/0,i=-1/0,a=0;a<e.length;a++){var c=e[a];0!==c.width&&1!==c.width&&(n=Math.min(n,c.top),r=Math.min(r,c.bottom),o=Math.max(o,c.top),i=Math.max(i,c.bottom))}return o<=r&&o-n<t&&i-r<t}function _n(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}function xn(e){n(e.collapsed,"expandRangeToStartOfLine: Provided range is not collapsed.");var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var r=function(e){var t=getComputedStyle(e),r=ot(e),o=r.createElement("div");o.style.fontFamily=t.fontFamily,o.style.fontSize=t.fontSize,o.style.fontStyle=t.fontStyle,o.style.fontWeight=t.fontWeight,o.style.lineHeight=t.lineHeight,o.style.position="absolute",o.textContent="M";var i=r.body;n(i,"Missing document.body"),i.appendChild(o);var a=o.getBoundingClientRect();return i.removeChild(o),a.height}(t),o=e.endContainer,i=e.endOffset;for(e.setStart(e.startContainer,0);Kn(En(e),r)&&(o=e.startContainer,i=e.startOffset,n(o.parentNode,"Found unexpected detached subtree when traversing."),e.setStartBefore(o),1!==o.nodeType||"inline"===getComputedStyle(o).display););for(var a=o,c=i-1;;){for(var l=a.nodeValue,s=c;s>=0;s--)if(!(null!=l&&s>0&&k.isSurrogatePair(l,s-1))){if(e.setStart(a,s),!Kn(En(e),r))break;o=a,i=s}if(-1===s||0===a.childNodes.length)break;c=_n(a=a.childNodes[s])}return e.setStart(o,i),e}var Dn="\\s|(?![_])"+K.getPunctuation(),Tn=new RegExp("^(?:"+Dn+")*(?:[']|(?!"+Dn+").)*(?:(?!"+Dn+").)"),wn=new RegExp("(?:(?!"+Dn+").)(?:[']|(?!"+Dn+").)*(?:"+Dn+")*$");function Bn(e,t){var n=t?wn.exec(e):Tn.exec(e);return n?n[0]:e}var Mn=function(e){return Bn(e,!0)},On=function(e){return Bn(e,!1)};function An(e,t){var n=e.getSelection();E(n.isCollapsed(),"moveSelectionForward should only be called with a collapsed SelectionState");var r,o=n.getStartKey(),i=n.getStartOffset(),a=e.getCurrentContent(),c=o;return t>a.getBlockForKey(o).getText().length-i?(c=a.getKeyAfter(o),r=0):r=i+t,n.merge({focusKey:c,focusOffset:r})}var Ln=Sn.isOptionKeyCommand,Fn=c.isBrowser("Chrome");function Nn(e,t,n){switch(e){case"redo":return je.redo(t);case"delete":return function(e){var t=hn(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),i=n.getBlockForKey(r).getText()[o];return An(e,i?k.getUTF16Length(i,0):1)}),"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return je.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}(t);case"delete-word":return function(e){var t=hn(e,(function(e){var t=e.getSelection(),n=t.getStartOffset(),r=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(r).getText().slice(n);return An(e,On(o).length||1)}),"forward");return t===e.getCurrentContent()?e:je.push(e,t,"remove-range")}(t);case"backspace":return yn(t);case"backspace-word":return function(e){var t=hn(e,(function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return pn(e,1);var r=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(r).getText().slice(0,n);return pn(e,Mn(o).length||1)}),"backward");return t===e.getCurrentContent()?e:je.push(e,t,"remove-range")}(t);case"backspace-to-start-of-line":return function(e,t){var n=hn(e,(function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return pn(e,1);var r=t.currentTarget.ownerDocument.defaultView.getSelection().getRangeAt(0);return St(e,null,(r=xn(r)).endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState}),"backward");return n===e.getCurrentContent()?e:je.push(e,n,"remove-range")}(t,n);case"split-block":return function(e){var t=Ce.splitBlock(e.getCurrentContent(),e.getSelection());return je.push(e,t,"split-block")}(t);case"transpose-characters":return function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var r,o,i=t.getAnchorKey(),a=e.getCurrentContent(),c=a.getBlockForKey(i).getLength();if(c<=1)return e;n===c?(r=t.set("anchorOffset",n-1),o=t):o=(r=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var l=ae(a,r),s=Ce.removeRange(a,r,"backward"),u=s.getSelectionAfter(),f=u.getAnchorOffset()-1,g=u.merge({anchorOffset:f,focusOffset:f}),p=Ce.replaceWithFragment(s,g,l),d=je.push(e,p,"insert-fragment");return je.acceptSelection(d,o)}(t);case"move-selection-to-start-of-block":return function(e){var t=e.getSelection(),n=t.getStartKey();return je.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}(t);case"move-selection-to-end-of-block":return function(e){var t=e.getSelection(),n=t.getEndKey(),r=e.getCurrentContent().getBlockForKey(n).getLength();return je.set(e,{selection:t.merge({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r,isBackward:!1}),forceSelection:!0})}(t);case"secondary-cut":return Cn(t);case"secondary-paste":return kn(t);default:return t}}var In,Rn=c.isBrowser("IE <= 9");function Pn(e){var t,r=null;return!Rn&&document.implementation&&document.implementation.createHTMLDocument&&(t=document.implementation.createHTMLDocument("foo"),n(t.documentElement,"Missing doc.documentElement"),t.documentElement.innerHTML=e,r=t.getElementsByTagName("body")[0]),r}function Un(e){return!(!e||!e.ownerDocument)&&(it(e)&&"A"===e.nodeName)}function Hn(e){return!(!e||!e.ownerDocument)&&(it(e)&&"IMG"===e.nodeName)}var jn=Le("draft_tree_data_support"),qn=new RegExp("\r","g"),Wn=new RegExp("\n","g"),zn=new RegExp("^\n","g"),Vn=new RegExp("&nbsp;","g"),Gn=new RegExp("&#13;?","g"),Jn=new RegExp("&#8203;?","g"),Xn=["bold","bolder","500","600","700","800","900"],Yn=["light","lighter","100","200","300","400"],$n=["className","href","rel","target","title"],Qn=["alt","className","height","src","width"],Zn=((In={})[a("public/DraftStyleDefault/depth0")]=0,In[a("public/DraftStyleDefault/depth1")]=1,In[a("public/DraftStyleDefault/depth2")]=2,In[a("public/DraftStyleDefault/depth3")]=3,In[a("public/DraftStyleDefault/depth4")]=4,In),er=t.Map({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),tr=function(e,t){return void 0===t&&(t=0),Object.keys(Zn).some((function(n){e.classList.contains(n)&&(t=Zn[n])})),t},nr=function(e){if(!Un(e))return!1;var t=e;return!(!t.href||"http:"!==t.protocol&&"https:"!==t.protocol&&"mailto:"!==t.protocol)},rr=function(e){if(!Hn(e))return!1;var t=e;return!(!t.attributes.getNamedItem("src")||!t.attributes.getNamedItem("src").value)},or=function(e){var n=t.OrderedSet();if(!yt(e))return n;var r=e,o=r.style.fontWeight,i=r.style.fontStyle,a=r.style.textDecoration;return n.withMutations((function(e){Xn.indexOf(o)>=0?e.add("BOLD"):Yn.indexOf(o)>=0&&e.remove("BOLD"),"italic"===i?e.add("ITALIC"):"normal"===i&&e.remove("ITALIC"),"underline"===a&&e.add("UNDERLINE"),"line-through"===a&&e.add("STRIKETHROUGH"),"none"===a&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}))},ir=function(e){return"ul"===e||"ol"===e},ar=function(){function e(e,n){this.characterList=t.List(),this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentStyle=t.OrderedSet(),this.currentText="",this.wrapper=null,this.blockConfigs=[],this.contentBlocks=[],this.entityMap=Oe,this.clear(),this.blockTypeMap=e,this.disambiguate=n}return e.prototype.clear=function(){this.characterList=t.List(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentStyle=t.OrderedSet(),this.currentText="",this.entityMap=Oe,this.wrapper=null,this.contentBlocks=[]},e.prototype.addDOMNode=function(e){var t;return this.contentBlocks=[],this.currentDepth=0,(t=this.blockConfigs).push.apply(t,this._toBlockConfigs([e])),this._trimCurrentText(),""!==this.currentText&&this.blockConfigs.push(this._makeBlockConfig()),this},e.prototype.getContentBlocks=function(){return 0===this.contentBlocks.length&&(jn?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},e.prototype.addStyle=function(e){this.currentStyle=this.currentStyle.union(e)},e.prototype.removeStyle=function(e){this.currentStyle=this.currentStyle.subtract(e)},e.prototype._makeBlockConfig=function(e){var n=e.key||ne(),r=T({key:n,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:t.List(),prevSibling:null,nextSibling:null,childConfigs:[]},e);return this.characterList=t.List(),this.currentBlockType="unstyled",this.currentText="",r},e.prototype._toBlockConfigs=function(e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=o.nodeName.toLowerCase();if("body"===i||ir(i)){this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());var a=this.currentDepth,c=this.wrapper;ir(i)&&(this.wrapper=i,ir(c)&&this.currentDepth++),n.push.apply(n,this._toBlockConfigs(Array.from(o.childNodes))),this.currentDepth=a,this.wrapper=c}else{var l=this.blockTypeMap.get(i);if(void 0===l)if("#text"!==i)if("br"!==i)if(rr(o))this._addImgNode(o);else if(nr(o))this._addAnchorNode(o,n);else{var s=er.has(i)?t.OrderedSet.of(er.get(i)):t.OrderedSet(),u=or(o);this.addStyle(s),this.addStyle(u),n.push.apply(n,this._toBlockConfigs(Array.from(o.childNodes))),this.removeStyle(u),this.removeStyle(s)}else this._addBreakNode(o);else this._addTextNode(o);else{this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());a=this.currentDepth,c=this.wrapper;if(this.wrapper="pre"===i?"pre":this.wrapper,"string"!=typeof l&&(l=this.disambiguate(i,this.wrapper)||l[0]||"unstyled"),!jn&&yt(o)&&("unordered-list-item"===l||"ordered-list-item"===l)){var f=o;this.currentDepth=tr(f,this.currentDepth)}var g=ne(),p=this._toBlockConfigs(Array.from(o.childNodes));this._trimCurrentText(),n.push(this._makeBlockConfig({key:g,childConfigs:p,type:l})),this.currentDepth=a,this.wrapper=c}}}return n},e.prototype._appendText=function(e){var t;this.currentText+=e;var n=A.create({style:this.currentStyle,entity:this.currentEntity});this.characterList=(t=this.characterList).push.apply(t,Array(e.length).fill(n))},e.prototype._trimCurrentText=function(){var e=this.currentText.length,n=e-this.currentText.trimLeft().length,r=this.currentText.trimRight().length,o=this.characterList.findEntry((function(e){return null!==e.getEntity()}));(n=void 0!==o?Math.min(n,o[0]):n)>(r=void 0!==(o=this.characterList.reverse().findEntry((function(e){return null!==e.getEntity()})))?Math.max(r,e-o[0]):r)?(this.currentText="",this.characterList=t.List()):(this.currentText=this.currentText.slice(n,r),this.characterList=this.characterList.slice(n,r))},e.prototype._addTextNode=function(e){var t=e.textContent;""===t.trim()&&"pre"!==this.wrapper&&(t=" "),"pre"!==this.wrapper&&(t=(t=t.replace(zn,"")).replace(Wn," ")),this._appendText(t)},e.prototype._addBreakNode=function(e){Lt(e)&&this._appendText("\n")},e.prototype._addImgNode=function(e){if(Hn(e)){var t=e,n={};Qn.forEach((function(e){var r=t.getAttribute(e);r&&(n[e]=r)})),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",n),Le("draftjs_fix_paste_for_img")?"presentation"!==t.getAttribute("role")&&this._appendText(""):this._appendText(""),this.currentEntity=null}},e.prototype._addAnchorNode=function(e,t){if(Un(e)){var n=e,r={};$n.forEach((function(e){var t=n.getAttribute(e);t&&(r[e]=t)})),r.url=new _(n.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",r||{}),t.push.apply(t,this._toBlockConfigs(Array.from(e.childNodes))),this.currentEntity=null}},e.prototype._toContentBlocks=function(e,n){void 0===n&&(n=null);for(var r=e.length-1,o=0;o<=r;o++){var i=e[o];i.parent=n,i.prevSibling=o>0?e[o-1].key:null,i.nextSibling=o<r?e[o+1].key:null,i.children=t.List(i.childConfigs.map((function(e){return e.key}))),this.contentBlocks.push(new G(T({},i))),this._toContentBlocks(i.childConfigs,i.key)}},e.prototype._hoistContainersInBlockConfigs=function(e){var n=this;return t.List(e).flatMap((function(e){return"unstyled"!==e.type||""!==e.text?[e]:n._hoistContainersInBlockConfigs(e.childConfigs)}))},e.prototype._toFlatContentBlocks=function(e){var t=this;this._hoistContainersInBlockConfigs(e).forEach((function(e){var n=t._extractTextFromBlockConfigs(e.childConfigs),r=n.text,o=n.characterList;t.contentBlocks.push(new U(T(T({},e),{text:e.text+r,characterList:e.characterList.concat(o)})))}))},e.prototype._extractTextFromBlockConfigs=function(e){for(var n=e.length-1,r="",o=t.List(),i=0;i<=n;i++){var a=e[i];r+=a.text,o=o.concat(a.characterList),""!==r&&"unstyled"!==a.type&&(r+="\n",o=o.push(o.last()));var c=this._extractTextFromBlockConfigs(a.childConfigs);r+=c.text,o=o.concat(c.characterList)}return{text:r,characterList:o}},e}(),cr=function(e,n,r){void 0===n&&(n=Pn),void 0===r&&(r=nt);var o=n(e=e.trim().replace(qn,"").replace(Vn," ").replace(Gn,"").replace(Jn,""));if(!o)return null;var i=function(e){var n={};return e.mapKeys((function(e,t){var r=[t.element];void 0!==t.aliasedElements&&r.push.apply(r,t.aliasedElements),r.forEach((function(t){void 0===n[t]?n[t]=e:"string"==typeof n[t]?n[t]=[n[t],e]:n[t].push(e)}))})),t.Map(n)}(r);return new ar(i,(function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null})).addDOMNode(o).getContentBlocks()},lr=Le("draft_tree_data_support"),sr=lr?G:U,ur=function(e,t){return cr(e,Pn,t)},fr=function(e,n,r){return e.reduce((function(e,o,i){o=Ne(o);var a=ne(),c={key:a,type:r,text:o,characterList:t.List(t.Repeat(n,o.length))};if(lr&&0!==i){var l=i-1,s=e[l]=e[l].merge({nextSibling:a});c=T(T({},c),{prevSibling:s.getKey()})}return e.push(new sr(c)),e}),[])};var gr={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return gr.toggleInlineStyle(e,"BOLD");case"italic":return gr.toggleInlineStyle(e,"ITALIC");case"underline":return gr.toggleInlineStyle(e,"UNDERLINE");case"code":return gr.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return gr.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return gr.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=Ce.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=je.push(e,t,"insert-characters");return je.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockBefore(r);if(o&&"atomic"===o.getType()){var i=n.getBlockMap().delete(o.getKey()),a=n.merge({blockMap:i,selectionAfter:t});if(a!==n)return je.push(e,a,"remove-range")}var c=gr.tryToRemoveBlockStyle(e);return c?je.push(e,c,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockForKey(r).getLength();if(t.getStartOffset()<o)return null;var i=n.getBlockAfter(r);if(!i||"atomic"!==i.getType())return null;var a=t.merge({focusKey:i.getKey(),focusOffset:i.getLength()}),c=Ce.removeRange(n,a,"forward");return c!==n?je.push(e,c,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),o=r.getAnchorKey();if(o!==r.getFocusKey())return t;var i=t.getCurrentContent(),a=i.getBlockForKey(o),c=a.getType();if("unordered-list-item"!==c&&"ordered-list-item"!==c)return t;e.preventDefault();var l=a.getDepth();if(!e.shiftKey&&l===n)return t;var s=function(e,t,n,r){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),c=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat([[i,a.get(i)]]).map((function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)}));return a=a.merge(c),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})}(i,r,e.shiftKey?-1:1,n);return je.push(t,s,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),r=n.getStartKey(),i=n.getEndKey(),a=e.getCurrentContent(),c=n;if(r!==i&&0===n.getEndOffset()){var l=o(a.getBlockBefore(i));i=l.getKey(),c=c.merge({anchorKey:r,anchorOffset:n.getStartOffset(),focusKey:i,focusOffset:l.getLength(),isBackward:!1})}if(a.getBlockMap().skipWhile((function(e,t){return t!==r})).reverse().skipWhile((function(e,t){return t!==i})).some((function(e){return"atomic"===e.getType()})))return e;var s=a.getBlockForKey(r).getType()===t?"unstyled":t;return je.push(e,Ce.setBlockType(a,c,s),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?gr.toggleBlockType(e,"code-block"):gr.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),r=e.getCurrentInlineStyle();if(n.isCollapsed())return je.setInlineStyleOverride(e,r.has(t)?r.remove(t):r.add(t));var o,i=e.getCurrentContent();return o=r.has(t)?Ce.removeInlineStyle(i,n,t):Ce.applyInlineStyle(i,n,t),je.push(e,o,"change-inline-style")},toggleLink:function(e,t,n){var r=Ce.applyEntity(e.getCurrentContent(),t,n);return je.push(e,r,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var r=t.getAnchorKey(),o=e.getCurrentContent(),i=o.getBlockForKey(r).getType(),a=o.getBlockBefore(r);if("code-block"===i&&a&&"code-block"===a.getType()&&0!==a.getLength())return null;if("unstyled"!==i)return Ce.setBlockType(o,t,"unstyled")}return null}},pr=/\r\n?|\n/g;function dr(e){return e.split(pr)}function hr(e,t,n){var r=Ce.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return je.push(e,r.set("entityMap",n),"insert-fragment")}var yr=c.isBrowser("Chrome")?Et:function(e){},vr={onBeforeInput:function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e._latestEditorState,r=t.data;if(r)if(e.props.handleBeforeInput&&an(e.props.handleBeforeInput(r,n,t.timeStamp)))t.preventDefault();else{var i=n.getSelection(),a=i.getStartOffset(),c=i.getAnchorKey();if(!i.isCollapsed())return t.preventDefault(),void e.update(fn(n,r,n.getCurrentInlineStyle(),_t(n.getCurrentContent(),n.getSelection()),!0));var l,s=fn(n,r,n.getCurrentInlineStyle(),_t(n.getCurrentContent(),n.getSelection()),!1),u=!1;if(u||(u=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),o=t.getStartOffset(),i=!1;return r.some((function(e){return o===e.get("start")?(i=!0,!0):o<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return o===t&&(i=!0,!0)}))})),i}(e._latestCommittedEditorState)),!u){var f=n.getBlockTree(c),g=s.getBlockTree(c);u=f.size!==g.size||f.zip(g).some((function(e){var t=e[0],n=e[1],o=t.get("start"),i=o+(o>=a?r.length:0),c=t.get("end"),l=c+(c>=a?r.length:0),s=n.get("start"),u=n.get("end"),f=n.get("decoratorKey");return t.get("decoratorKey")!==f||t.get("leaves").size!==n.get("leaves").size||i!==s||l!==u||null!=f&&u-s!=c-o}))}if(u||(l=r,u=un&&("'"==l||"/"==l)),u||(u=o(s.getDirectionMap()).get(c)!==o(n.getDirectionMap()).get(c)),u)return t.preventDefault(),s=je.set(s,{forceSelection:!0}),void e.update(s);s=je.set(s,{nativelyRenderedContent:s.getCurrentContent()}),e._pendingStateFromBeforeInput=s,C((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}},onBlur:function(e,t){var n=t.currentTarget.ownerDocument;if(!Boolean(e.props.preserveSelectionOnBlur)&&p(n)===n.body){var r=n.defaultView.getSelection(),o=e.editor;1===r.rangeCount&&g(o,r.anchorNode)&&g(o,r.focusNode)&&r.removeAllRanges()}var i=e._latestEditorState,a=i.getSelection();if(a.getHasFocus()){var c=a.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(t),e.update(je.acceptSelection(i,c))}},onCompositionStart:function(e,t){e.setMode("composite"),e.update(je.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)},onCopy:function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(gn(e._latestEditorState))},onCut:function(e,t){var n,r=e._latestEditorState,o=r.getSelection(),i=t.target;if(o.isCollapsed())t.preventDefault();else{if(function(e){if(!(e&&"ownerDocument"in e))return!1;if("ownerDocument"in e){var t=e;if(!t.ownerDocument.defaultView)return t instanceof Node;if(t instanceof t.ownerDocument.defaultView.Node)return!0}return!1}(i)){var a=i;n=v(h.getScrollParent(a))}var c=gn(r);e.setClipboard(c),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(n),e.exitCurrentMode(),e.update(function(e){var t=Ce.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return je.push(e,t,"remove-range")}(r))}),0)}},onDragOver:function(e,t){e.setMode("drag"),t.preventDefault()},onDragStart:function(e){e._internalDrag=!0,e.setMode("drag")},onFocus:function(e,t){var n=e._latestEditorState,r=n.getSelection();if(!r.getHasFocus()){var o=r.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),c.isBrowser("Chrome < 60.0.3081.0")?e.update(je.forceSelection(n,o)):e.update(je.acceptSelection(n,o))}},onInput:function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e.editor.ownerDocument.defaultView.getSelection(),r=n.anchorNode,i=n.isCollapsed;if(!(r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.ELEMENT_NODE)){if(r.nodeType===Node.TEXT_NODE&&(null!==r.previousSibling||null!==r.nextSibling)){var a=r.parentNode;r.nodeValue=a.textContent;for(var c=a.firstChild;null!==c;c=c.nextSibling)c!==r&&a.removeChild(c)}var l=r.textContent,s=e._latestEditorState,u=o(ct(r)),f=pt(u),g=f.blockKey,p=f.decoratorKey,d=f.leafKey,h=s.getBlockTree(g).getIn([p,"leaves",d]),y=h.start,v=h.end,m=s.getCurrentContent(),S=m.getBlockForKey(g),b=S.getText().slice(y,v);if(l.endsWith("\n\n")&&(l=l.slice(0,-1)),l!==b){var C,k,E,K,_=s.getSelection(),x=_.merge({anchorOffset:y,focusOffset:v,isBackward:!1}),D=S.getEntityAt(y),T=Kt(D)?m.getEntity(D):null,w="MUTABLE"===(null!=T?T.getMutability():null),B=w?"spellcheck-change":"apply-entity",M=Ce.replaceText(m,x,l,S.getInlineStyleAt(y),w?S.getEntityAt(y):null);if(vn)C=n.anchorOffset,k=n.focusOffset,K=(E=y+Math.min(C,k))+Math.abs(C-k),C=E,k=K;else{var O=l.length-b.length;E=_.getStartOffset(),K=_.getEndOffset(),C=i?K+O:E,k=K+O}var A=M.merge({selectionBefore:m.getSelectionAfter(),selectionAfter:_.merge({anchorOffset:C,focusOffset:k})});e.update(je.push(s,A,B))}else{var L=t.nativeEvent.inputType;if(L){var F=function(e,t){switch(e){case"deleteContentBackward":return yn(t)}return t}(L,s);if(F!==s)return e.restoreEditorDOM(),void e.update(F)}}}},onKeyDown:function(e,t){var n=t.which,r=e._latestEditorState;function o(n){var r=e.props[n];return!!r&&(r(t),!0)}switch(n){case l.RETURN:if(t.preventDefault(),e.props.handleReturn&&an(e.props.handleReturn(t,r)))return;break;case l.ESC:if(t.preventDefault(),o("onEscape"))return;break;case l.TAB:if(o("onTab"))return;break;case l.UP:if(o("onUpArrow"))return;break;case l.RIGHT:if(o("onRightArrow"))return;break;case l.DOWN:if(o("onDownArrow"))return;break;case l.LEFT:if(o("onLeftArrow"))return;break;case l.SPACE:Fn&&Ln(t)&&t.preventDefault()}var i=e.props.keyBindingFn(t);if(null!=i&&""!==i)if("undo"!==i){if(t.preventDefault(),!e.props.handleKeyCommand||!an(e.props.handleKeyCommand(i,r,t.timeStamp))){var a=Nn(i,r,t);a!==r&&e.update(a)}}else!function(e,t,n){var r=je.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(je.set(t,{nativelyRenderedContent:null})),setTimeout((function(){n(r)}),0)):n(r);else{var o=r.getCurrentContent();n(je.set(r,{nativelyRenderedContent:o}))}}(t,r,e.update);else if(n===l.SPACE&&Fn&&Ln(t)){var c=Ce.replaceText(r.getCurrentContent(),r.getSelection(),"");e.update(je.push(r,c,"insert-characters"))}},onPaste:function(e,t){t.preventDefault();var n=new b(t.clipboardData);if(!n.isRichText()){var r=n.getFiles(),o=n.getText();if(r.length>0){if(e.props.handlePastedFiles&&an(e.props.handlePastedFiles(r)))return;return void on(r,(function(t){if(t=t||o){var n=e._latestEditorState,r=dr(t),i=A.create({style:n.getCurrentInlineStyle(),entity:_t(n.getCurrentContent(),n.getSelection())}),a=gr.getCurrentBlockType(n),c=fr(r,i,a),l=B.createFromArray(c),s=Ce.replaceWithFragment(n.getCurrentContent(),n.getSelection(),l);e.update(je.push(n,s,"insert-fragment"))}}))}}var i=[],a=n.getText(),c=n.getHTML(),l=e._latestEditorState;if(!e.props.handlePastedText||!an(e.props.handlePastedText(a,c,l))){if(a&&(i=dr(a)),!e.props.stripPastedStyles){var s=e.getClipboard();if(n.isRichText()&&s){if(-1!==c.indexOf(e.getEditorKey())||1===i.length&&1===s.size&&s.first().getText()===a)return void e.update(hr(e._latestEditorState,s))}else if(s&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,n){return t.getText()===e[n]}))}(i,s))return void e.update(hr(e._latestEditorState,s));if(c){var u=ur(c,e.props.blockRenderMap);if(u){var f=u.contentBlocks,g=u.entityMap;if(f){var p=B.createFromArray(f);return void e.update(hr(e._latestEditorState,p,g))}}}e.setClipboard(null)}if(i.length){var d=A.create({style:l.getCurrentInlineStyle(),entity:_t(l.getCurrentContent(),l.getSelection())}),h=gr.getCurrentBlockType(l),y=fr(i,d,h),v=B.createFromArray(y);e.update(hr(e._latestEditorState,v))}}},onSelect:Et,onMouseUp:yr,onKeyUp:yr},mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=a({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return i.createElement("div",{className:t},i.createElement("div",{className:a("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},t}(i.Component),Sr=c.isPlatform("Mac OS X"),br=Sr&&c.isBrowser("Firefox < 29"),Cr=Sn.hasCommandModifier,kr=Sn.isCtrlKeyCommand;function Er(e){return Sr&&e.altKey||kr(e)}function Kr(e){switch(e.keyCode){case 66:return Cr(e)?"bold":null;case 68:return kr(e)?"delete":null;case 72:return kr(e)?"backspace":null;case 73:return Cr(e)?"italic":null;case 74:return Cr(e)?"code":null;case 75:return Sr&&kr(e)?"secondary-cut":null;case 77:case 79:return kr(e)?"split-block":null;case 84:return Sr&&kr(e)?"transpose-characters":null;case 85:return Cr(e)?"underline":null;case 87:return Sr&&kr(e)?"backspace-word":null;case 89:return kr(e)?Sr?"secondary-paste":"redo":null;case 90:return function(e){return Cr(e)?e.shiftKey?"redo":"undo":null}(e)||null;case l.RETURN:return"split-block";case l.DELETE:return function(e){return!Sr&&e.shiftKey?null:Er(e)?"delete-word":"delete"}(e);case l.BACKSPACE:return function(e){return Cr(e)&&Sr?"backspace-to-start-of-line":Er(e)?"backspace-word":"backspace"}(e);case l.LEFT:return br&&Cr(e)?"move-selection-to-start-of-block":null;case l.RIGHT:return br&&Cr(e)?"move-selection-to-end-of-block":null;default:return null}}var _r=c.isBrowser("IE"),xr=!_r,Dr={edit:vr,composite:Bt,drag:cn,cut:null,render:null},Tr=!1,wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){this._update()},t.prototype.componentDidUpdate=function(){this._update()},t.prototype._update=function(){var e=this.props.editor;e._latestEditorState=this.props.editorState,e._blockSelectEvents=!0},t}(i.Component),Br=function(e){function t(t){var r=e.call(this,t)||this;return r.focus=function(e){var t=r.props.editorState,o=t.getSelection().getHasFocus(),i=r.editor;if(i){var a=h.getScrollParent(i),c=e||v(a),l=c.x,s=c.y;n(yt(i),"editorNode is not an HTMLElement"),i.focus(),a===window?window.scrollTo(l,s):d.setTop(a,s),o||r.update(je.forceSelection(t,t.getSelection()))}},r.blur=function(){var e=r.editor;e&&(n(yt(e),"editorNode is not an HTMLElement"),e.blur())},r.setMode=function(e){var t=r.props,n=t.onPaste,o=t.onCut,i=t.onCopy,a=T({},Dr.edit);n&&(a.onPaste=n),o&&(a.onCut=o),i&&(a.onCopy=i);var c=T(T({},Dr),{edit:a});r._handler=c[e]},r.exitCurrentMode=function(){r.setMode("edit")},r.restoreEditorDOM=function(e){r.setState({contentsKey:r.state.contentsKey+1},(function(){r.focus(e)}))},r.setClipboard=function(e){r._clipboard=e},r.getClipboard=function(){return r._clipboard},r.update=function(e){r._latestEditorState=e,r.props.onChange(e)},r.onDragEnter=function(){r._dragCount++},r.onDragLeave=function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()},r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=t.editorKey||ne(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=t.editorState,r._latestCommittedEditorState=t.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},window.__DEV__&&["onDownArrow","onEscape","onLeftArrow","onRightArrow","onTab","onUpArrow"].forEach((function(e){t.hasOwnProperty(e)&&console.warn("Supplying an `"+e+"` prop to `DraftEditor` has been deprecated. If your handler needs access to the keyboard event, supply a custom `keyBindingFn` prop that falls back to the default one (eg. https://is.gd/RG31RJ).")})),r.state={contentsKey:0},r}return D(t,e),t.prototype._buildHandler=function(e){var t=this,n=s.unstable_flushControlled;return function(r){if(!t.props.readOnly){var o=t._handler&&t._handler[e];o&&(n?n((function(){return o(t,r)})):o(t,r))}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:o(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return i.createElement(mr,T({},e))}return null},t.prototype.render=function(){var e=this,t=this.props,n=t.blockRenderMap,r=t.blockRendererFn,o=t.blockStyleFn,c=t.customStyleFn,l=t.customStyleMap,s=t.editorState,u=t.readOnly,f=t.textAlignment,g=t.textDirectionality;console.log("ffffffffffffff");var p=a({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===f,"DraftEditor/alignRight":"right"===f,"DraftEditor/alignCenter":"center"===f}),d=this.props.role||"textbox",h="combobox"===d?!!this.props.ariaExpanded:null,y={blockRenderMap:n,blockRendererFn:r,blockStyleFn:o,customStyleMap:T(T({},rt),l),customStyleFn:c,editorKey:this._editorKey,editorState:s,textDirectionality:g};return i.createElement("div",{className:p},this._renderPlaceholder(),i.createElement("div",{className:a("DraftEditor/editorContainer"),ref:function(t){return e.editorContainer=t}},i.createElement("div",{"aria-activedescendant":u?null:this.props.ariaActiveDescendantID,"aria-autocomplete":u?null:this.props.ariaAutoComplete,"aria-controls":u?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":u?null:h,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":u?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoCorrect:this.props.autoCorrect,className:a({notranslate:!u,"public/DraftEditor/content":!0}),contentEditable:!u,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(t){return e.editor=t},role:u?null:d,spellCheck:xr&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},i.createElement(wr,{editor:this,editorState:s}),i.createElement(tn,T({},y,{key:"contents"+this.state.contentsKey})))))},t.prototype.componentDidMount=function(){this._blockSelectEvents=!1,!Tr&&Le("draft_ods_enabled")&&(Tr=!0,Ft()),this.setMode("edit"),_r&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):global.execCommand("AutoUrlDetect",!1,!1))},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},t.defaultProps={blockRenderMap:nt,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:Kr,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},t}(i.Component),Mr=Object.freeze({__proto__:null}),Or=function(e){return"_"+String(e)},Ar=function(e){return e.slice(1)},Lr=k.strlen;function Fr(e,t){var n=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(r,o){var i=e.getText(),a=e.getEntityAt(r);n.push({offset:Lr(i.slice(0,r)),length:Lr(i.slice(r,o)),key:Number(t[Or(a)])})})),n}var Nr=function(e,t){return e===t},Ir=function(e){return!!e},Rr=[];function Pr(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),n=t.flatten().toSet().map((function(n){return function(e,t,n){var r=[];return N(t.map((function(e){return e.has(n)})).toList(),Nr,Ir,(function(t,o){var i=e.getText();r.push({offset:k.strlen(i.slice(0,t)),length:k.strlen(i.slice(t,o)),style:n})})),r}(e,t,n)}));return Array.prototype.concat.apply(Rr,n.toJS())}var Ur=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:Pr(e),entityRanges:Fr(e,t),data:e.getData().toObject()}},Hr=function(e,t){var r=t.entityMap,o=[],i={},a={},c=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var n=e.getEntityAt(t),o=Or(n);a[o]||(a[o]=n,r[o]=""+c,c++)})),function(e,t,r,o){if(e instanceof U)r.push(Ur(e,t));else{n(e instanceof G,"block is not a BlockNode");var i=e.getParentKey(),a=o[e.getKey()]=T(T({},Ur(e,t)),{children:[]});i?o[i].children.push(a):r.push(a)}}(e,r,o,i)})),{blocks:o,entityMap:r}},jr=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},qr=function(e){var t=e.blocks,r=[];return n(Array.isArray(t),"Invalid raw state"),Array.isArray(t)&&t.length?(function(e,t){for(var r=w(e).reverse();r.length;){var o=r.pop();t(o);var i=o.children;n(Array.isArray(i),"Invalid tree raw block"),r=r.concat(w(i.reverse()))}}(t,(function(e){var t=T({},e);jr(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?T(T({},t),{depth:(e.depth||0)+1}):t})))}(e),null!=e.children&&e.children.length>0)||(delete t.children,r.push(t))})),e.blocks=r,T(T({},e),{blocks:r})):e},Wr=function(e){var t=[],n=[];return e.blocks.forEach((function(e){var r=jr(e),o=e.depth||0,i=T(T({},e),{children:[]});if(r){var a=n[0];if(null==a&&0===o)t.push(i);else if(null==a||a.depth<o-1){var c={key:ne(),text:"",depth:o-1,type:e.type,children:[],entityRanges:[],inlineStyleRanges:[]};n.unshift(c),1===o?t.push(c):null!=a&&a.children.push(c),c.children.push(i)}else if(a.depth===o-1)a.children.push(i);else{for(;null!=a&&a.depth>=o;)n.shift(),a=n[0];o>0?a.children.push(i):t.push(i)}}else t.push(i)})),T(T({},e),{blocks:t})},zr={isValidBlock:function(e,t){var n=e.getKey(),r=e.getParentKey();if(null!=r&&!t.get(r).getChildKeys().includes(n))return E(!0,"Tree is missing parent -> child pointer on %s",n),!1;if(!e.getChildKeys().map((function(e){return t.get(e)})).every((function(e){return e.getParentKey()===n})))return E(!0,"Tree is missing child -> parent pointer on %s",n),!1;var o=e.getPrevSiblingKey();if(null!=o&&t.get(o).getNextSiblingKey()!==n)return E(!0,"Tree is missing nextSibling pointer on %s's prevSibling",n),!1;var i=e.getNextSiblingKey();if(null!=i&&t.get(i).getPrevSiblingKey()!==n)return E(!0,"Tree is missing prevSibling pointer on %s's nextSibling",n),!1;return null!==i&&null!==o&&o===i?(E(!0,"Tree has a two-node cycle at %s",n),!1):!(""!=e.text&&e.getChildKeys().size>0)||(E(!0,"Leaf node %s has children",n),!1)},isConnectedTree:function(e){var t=e.toArray().filter((function(e){return null==e.getParentKey()&&null==e.getPrevSiblingKey()}));if(1!==t.length)return E(!0,"Tree is not connected. More or less than one first node"),!1;for(var n=0,r=t.shift().getKey(),o=[];null!=r;){var i=e.get(r),a=i.getChildKeys(),c=i.getNextSiblingKey();if(a.size>0){null!=c&&o.unshift(c);var l=a.map((function(t){return e.get(t)})).find((function(e){return null==e.getPrevSiblingKey()}));if(null==l)return E(!0,"%s has no first child",r),!1;r=l.getKey()}else r=null!=i.getNextSiblingKey()?i.getNextSiblingKey():o.shift();n++}return n===e.size||(E(!0,"Tree is not connected. %s nodes were seen instead of %s",n,e.size),!1)},isValidTree:function(e){var t=this;return!!e.toArray().every((function(n){return t.isValidBlock(n,e)}))&&this.isConnectedTree(e)}};var Vr=k.substr;var Gr=k.substr,Jr=t.OrderedSet();var Xr=Le("draft_tree_data_support"),Yr=function(e,n){var r=e.key,o=e.type,i=e.data;return{text:e.text,depth:e.depth||0,type:o||"unstyled",key:r||ne(),data:t.Map(i),characterList:$r(e,n)}},$r=function(e,n){var r=e.text,o=e.entityRanges||[];return function(e,n){var r=e.map((function(e,t){var r=n[t];return A.create({style:e,entity:r})}));return t.List(r)}(function(e,t){var n=Array(e.length).fill(Jr);return t&&t.forEach((function(t){for(var r=Gr(e,0,t.offset).length,o=r+Gr(e,t.offset,t.length).length;r<o;)n[r]=n[r].add(t.style),r++})),n}(r,e.inlineStyleRanges||[]),function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var r=Vr(e,0,t.offset).length,o=r+Vr(e,t.offset,t.length).length,i=r;i<o;i++)n[i]=t.key})),n}(r,o.filter((function(e){return n.hasOwnProperty(e.key)})).map((function(e){return T(T({},e),{key:n[e.key]})}))))},Qr=function(e){return T(T({},e),{key:e.key||ne()})},Zr=function(e,t,n){var r=t.map((function(e){return T(T({},e),{parentRef:n})}));return e.concat(r.reverse())},eo=function(e,r){var o=e.blocks.find((function(e){return Array.isArray(e.children)&&e.children.length>0})),i=Xr&&!o?Wr(e).blocks:e.blocks;if(!Xr)return function(e,n){return t.OrderedMap(e.map((function(e){var t=new U(Yr(e,n));return[t.getKey(),t]})))}(o?qr(e).blocks:i,r);var a=function(e,r){return e.map(Qr).reduce((function(o,i,a){n(Array.isArray(i.children),"invalid RawDraftContentBlock can not be converted to ContentBlockNode");var c=i.children.map(Qr),l=new G(T(T({},Yr(i,r)),{prevSibling:0===a?null:e[a-1].key,nextSibling:a===e.length-1?null:e[a+1].key,children:t.List(c.map((function(e){return e.key})))}));o=o.set(l.getKey(),l);for(var s=Zr([],c,l);s.length>0;){var u=s.pop(),f=u.parentRef,g=f.getChildKeys(),p=g.indexOf(u.key),d=Array.isArray(u.children);if(!d){n(d,"invalid RawDraftContentBlock can not be converted to ContentBlockNode");break}var h=u.children.map(Qr),y=new G(T(T({},Yr(u,r)),{parent:f.getKey(),children:t.List(h.map((function(e){return e.key}))),prevSibling:0===p?null:g.get(p-1),nextSibling:p===g.size-1?null:g.get(p+1)}));o=o.set(y.getKey(),y),s=Zr(s,h,y)}return o}),t.OrderedMap())}(i,r);return window.__DEV__&&n(zr.isValidTree(a),"Should be a valid tree"),a};exports.AtomicBlockUtils=$e,exports.BlockMapBuilder=B,exports.CharacterMetadata=A,exports.CompositeDecorator=Qe,exports.ContentBlock=U,exports.ContentState=Re,exports.DefaultDraftBlockRenderMap=nt,exports.DefaultDraftInlineStyle=rt,exports.DraftEditor=Br,exports.Editor=Br,exports.EditorBlock=Qt,exports.EditorState=je,exports.Entity=Oe,exports.EntityInstance=Te,exports.KeyBindingUtil=Sn,exports.Modifier=Ce,exports.RawDraftContentState=Mr,exports.RichUtils=gr,exports.SelectionState=Ae,exports.convertFromHTML=cr,exports.convertFromRaw=function(e){n(Array.isArray(e.blocks),"invalid RawDraftContentState");var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach((function(e){var r=t[e],o=r.type,i=r.mutability,a=r.data;n[e]=Oe.__create(o,i,a||{})})),n}(e),r=eo(e,t),o=r.isEmpty()?new Ae:Ae.createEmpty(r.first().getKey());return new Re({blockMap:r,entityMap:t,selectionBefore:o,selectionAfter:o})},exports.convertToRaw=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.blocks,r=t.entityMap,o={};return Object.keys(r).forEach((function(t,n){var r=e.getEntity(Ar(t));o[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}})),{blocks:n,entityMap:o}}(e,t=Hr(e,t))},exports.genKey=ne,exports.getDefaultKeyBinding=Kr,exports.getVisibleSelectionRect=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=function(e){var t,n,r=En(e),o=0,i=0,a=0,c=0;if(r.length){r.length>1&&0===r[0].width?(o=(t=r[1]).top,i=t.right,a=t.bottom,c=t.left):(o=(n=r[0]).top,i=n.right,a=n.bottom,c=n.left);for(var l=1;l<r.length;l++){var s=r[l];0!==s.height&&0!==s.width&&(o=Math.min(o,s.top),i=Math.max(i,s.right),a=Math.max(a,s.bottom),c=Math.min(c,s.left))}}return{top:o,right:i,bottom:a,left:c,width:i-c,height:a-o}}(t.getRangeAt(0)),r=n.top,o=n.right,i=n.bottom,a=n.left;return 0===r&&0===o&&0===i&&0===a?null:n};
//# sourceMappingURL=index.min.js.map
